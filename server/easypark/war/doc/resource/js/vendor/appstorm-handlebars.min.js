(function(){function c(d,b,l){d.addEventListener?d.addEventListener(b,l,!1):d.attachEvent("on"+b,l)}function b(d){if("keypress"==d.type){var b=String.fromCharCode(d.which);d.shiftKey||(b=b.toLowerCase());return b}return s[d.which]?s[d.which]:t[d.which]?t[d.which]:String.fromCharCode(d.which).toLowerCase()}function e(d){d=d||{};var b=!1,l;for(l in y)d[l]?b=!0:y[l]=0;b||(r=!1)}function f(b,l,k,c,e){var f,q,r=[],g=k.type;if(!d[b])return[];"keyup"==g&&p(b)&&(l=[b]);for(f=0;f<d[b].length;++f)(q=d[b][f],
q.seq&&y[q.seq]!=q.level||g!=q.action||("keypress"!=g||k.metaKey||k.ctrlKey)&&l.sort().join(",")!==q.modifiers.sort().join(","))||(c&&q.combo==e&&d[b].splice(f,1),r.push(q));return r}function g(d){var b=[];d.shiftKey&&b.push("shift");d.altKey&&b.push("alt");d.ctrlKey&&b.push("ctrl");d.metaKey&&b.push("meta");return b}function h(d,b,l){A.stopCallback(b,b.target||b.srcElement,l)||!1!==d(b,l)||(b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.returnValue=!1,b.cancelBubble=
!0)}function n(d){"number"!==typeof d.which&&(d.which=d.keyCode);var l=b(d);l&&("keyup"==d.type&&q==l?q=!1:A.handleKey(l,g(d),d))}function p(d){return"shift"==d||"ctrl"==d||"alt"==d||"meta"==d}function m(d,b,l){if(!l){if(!x){x={};for(var k in s)95<k&&112>k||s.hasOwnProperty(k)&&(x[s[k]]=k)}l=x[d]?"keydown":"keypress"}"keypress"==l&&b.length&&(l="keydown");return l}function v(c,g,n,z,s){l[c+":"+n]=g;c=c.replace(/\s+/g," ");var A=c.split(" "),F,t,D=[];if(1<A.length){var x=c,I=n;y[x]=0;I||(I=m(A[0],
[]));c=function(){r=I;++y[x];clearTimeout(k);k=setTimeout(e,1E3)};n=function(d){h(g,d,x);"keyup"!==I&&(q=b(d));setTimeout(e,10)};for(z=0;z<A.length;++z)v(A[z],z<A.length-1?c:n,I,x,z)}else{t="+"===c?["+"]:c.split("+");for(A=0;A<t.length;++A)F=t[A],u[F]&&(F=u[F]),n&&"keypress"!=n&&w[F]&&(F=w[F],D.push("shift")),p(F)&&D.push(F);n=m(F,D,n);d[F]||(d[F]=[]);f(F,D,{type:n},!z,c);d[F][z?"unshift":"push"]({callback:g,modifiers:D,action:n,seq:z,level:s,combo:c})}}for(var s={8:"backspace",9:"tab",13:"enter",
16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},t={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},w={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",
"return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},x,d={},l={},y={},k,q=!1,r=!1,z=1;20>z;++z)s[111+z]="f"+z;for(z=0;9>=z;++z)s[z+96]=z;c(document,"keypress",n);c(document,"keydown",n);c(document,"keyup",n);var A={bind:function(d,b,l){d=d instanceof Array?d:[d];for(var k=0;k<d.length;++k)v(d[k],b,l);return this},unbind:function(d,b){return A.bind(d,function(){},b)},trigger:function(d,b){if(l[d+":"+b])l[d+":"+b]({},d);return this},reset:function(){d={};
l={};return this},stopCallback:function(d,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.contentEditable&&"true"==b.contentEditable},handleKey:function(d,b,l){b=f(d,b,l);var k,c={},y=0,q=!1;for(k=0;k<b.length;++k)b[k].seq&&(y=Math.max(y,b[k].level));for(k=0;k<b.length;++k)b[k].seq?b[k].level==y&&(q=!0,c[b[k].seq]=1,h(b[k].callback,l,b[k].combo)):q||h(b[k].callback,l,b[k].combo);l.type==r&&!p(d)&&e(c)}};window.Mousetrap=
A;"function"===typeof define&&define.amd&&define(A)})();(function(){function c(d){var l,k,c,y="json"==d;if(y||"json-stringify"==d||"json-parse"==d){if("json-stringify"==d||y){if(l="function"==typeof m.stringify&&A){(c=function(){return 1}).toJSON=c;try{l="0"===m.stringify(0)&&"0"===m.stringify(new Number)&&'""'==m.stringify(new String)&&m.stringify(g)===b&&m.stringify(b)===b&&m.stringify()===b&&"1"===m.stringify(c)&&"[1]"==m.stringify([c])&&"[null]"==m.stringify([b])&&"null"==m.stringify(f)&&"[null,null,null]"==m.stringify([b,g,f])&&'{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==
m.stringify({A:[c,e,!1,f,"\x00\b\n\f\r\t"]})&&"1"===m.stringify(f,c)&&"[\n 1,\n 2\n]"==m.stringify([1,2],f,1)&&'"-271821-04-20T00:00:00.000Z"'==m.stringify(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==m.stringify(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==m.stringify(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==m.stringify(new Date(-1))}catch(q){l=!1}}if(!y)return l}if("json-parse"==d||y){if("function"==typeof m.parse)try{if(0===m.parse("0")&&!m.parse(!1)&&(c=m.parse('{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'),
k=5==c.a.length&&1==c.a[0])){try{k=!m.parse('"\t"')}catch(r){}if(k)try{k=1!=m.parse("01")}catch(n){}}}catch(z){k=!1}if(!y)return k}return l&&k}}var b=void 0,e=!0,f=null,g={}.toString,h,n,p="function"===typeof define&&define.c,m=!p&&"object"==typeof exports&&exports;m||p?"object"==typeof JSON&&JSON?p?m=JSON:(m.stringify=JSON.stringify,m.parse=JSON.parse):p&&(m=this.JSON={}):m=this.JSON||(this.JSON={});var v,s,t,w,u,x,d,l,y,k,q,r,z,A=new Date(-0xc782b5b800cec),B,E,C;try{A=-109252==A.getUTCFullYear()&&
0===A.getUTCMonth()&&1==A.getUTCDate()&&10==A.getUTCHours()&&37==A.getUTCMinutes()&&6==A.getUTCSeconds()&&708==A.getUTCMilliseconds()}catch(G){}c("json")||(A||(B=Math.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],C=function(d,b){return E[b]+365*(d-1970)+B((d-1969+(b=+(1<b)))/4)-B((d-1901+b)/100)+B((d-1601+b)/400)}),(h={}.hasOwnProperty)||(h=function(d){var b={},l;(b.__proto__=f,b.__proto__={toString:1},b).toString!=g?h=function(d){var b=this.__proto__;d=d in(this.__proto__=f,this);this.__proto__=
b;return d}:(l=b.constructor,h=function(d){var b=(this.constructor||l).prototype;return d in this&&!(d in b&&this[d]===b[d])});b=f;return h.call(this,d)}),n=function(d,b){var l=0,k,c,y;(k=function(){this.valueOf=0}).prototype.valueOf=0;c=new k;for(y in c)h.call(c,y)&&l++;k=c=f;l?l=2==l?function(d,b){var l={},k="[object Function]"==g.call(d),c;for(c in d)k&&"prototype"==c||h.call(l,c)||(l[c]=1)&&h.call(d,c)&&b(c)}:function(d,b){var l="[object Function]"==g.call(d),k,c;for(k in d)l&&"prototype"==k||
!h.call(d,k)||(c="constructor"===k)||b(k);(c||h.call(d,k="constructor"))&&b(k)}:(c="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),l=function(d,b){var l="[object Function]"==g.call(d),k;for(k in d)l&&"prototype"==k||!h.call(d,k)||b(k);for(l=c.length;k=c[--l];h.call(d,k)&&b(k));});l(d,b)},c("json-stringify")||(v={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},s=function(d,b){return("000000"+(b||0)).slice(-d)},
t=function(d){for(var b='"',l=0,k;k=d.charAt(l);l++)b+=-1<'\\"\b\f\n\r\t'.indexOf(k)?v[k]:v[k]=" ">k?"\\u00"+s(2,k.charCodeAt(0).toString(16)):k;return b+'"'},w=function(d,l,k,c,y,q,r){var m=l[d],z,p,v,A,u,x,E,G,H;if("object"==typeof m&&m)if(z=g.call(m),"[object Date]"!=z||h.call(m,"toJSON"))"function"==typeof m.toJSON&&("[object Number]"!=z&&"[object String]"!=z&&"[object Array]"!=z||h.call(m,"toJSON"))&&(m=m.toJSON(d));else if(m>-1/0&&m<1/0){if(C){v=B(m/864E5);for(z=B(v/365.2425)+1970-1;C(z+1,0)<=
v;z++);for(p=B((v-C(z,0))/30.42);C(z,p+1)<=v;p++);v=1+v-C(z,p);A=(m%864E5+864E5)%864E5;u=B(A/36E5)%24;x=B(A/6E4)%60;E=B(A/1E3)%60;A%=1E3}else z=m.getUTCFullYear(),p=m.getUTCMonth(),v=m.getUTCDate(),u=m.getUTCHours(),x=m.getUTCMinutes(),E=m.getUTCSeconds(),A=m.getUTCMilliseconds();m=(0>=z||1E4<=z?(0>z?"-":"+")+s(6,0>z?-z:z):s(4,z))+"-"+s(2,p+1)+"-"+s(2,v)+"T"+s(2,u)+":"+s(2,x)+":"+s(2,E)+"."+s(3,A)+"Z"}else m=f;k&&(m=k.call(l,d,m));if(m===f)return"null";z=g.call(m);if("[object Boolean]"==z)return""+
m;if("[object Number]"==z)return m>-1/0&&m<1/0?""+m:"null";if("[object String]"==z)return t(m);if("object"==typeof m){for(d=r.length;d--;)if(r[d]===m)throw TypeError();r.push(m);G=[];l=q;q+=y;if("[object Array]"==z){p=0;for(d=m.length;p<d;H||(H=e),p++)z=w(p,m,k,c,y,q,r),G.push(z===b?"null":z);d=H?y?"[\n"+q+G.join(",\n"+q)+"\n"+l+"]":"["+G.join(",")+"]":"[]"}else n(c||m,function(d){var l=w(d,m,k,c,y,q,r);l!==b&&G.push(t(d)+":"+(y?" ":"")+l);H||(H=e)}),d=H?y?"{\n"+q+G.join(",\n"+q)+"\n"+l+"}":"{"+G.join(",")+
"}":"{}";r.pop();return d}},m.stringify=function(d,b,l){var k,c,y,e,q,f;if("function"==typeof b||"object"==typeof b&&b)if("[object Function]"==g.call(b))c=b;else if("[object Array]"==g.call(b))for(y={},e=0,q=b.length;e<q;f=b[e++],("[object String]"==g.call(f)||"[object Number]"==g.call(f))&&(y[f]=1));if(l)if("[object Number]"==g.call(l)){if(0<(l-=l%1))for(k="",10<l&&(l=10);k.length<l;k+=" ");}else"[object String]"==g.call(l)&&(k=10>=l.length?l:l.slice(0,10));return w("",(f={},f[""]=d,f),c,y,k,"",
[])}),c("json-parse")||(u=String.fromCharCode,x={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"\t",n:"\n",f:"\f",r:"\r"},d=function(){r=z=f;throw SyntaxError();},l=function(){for(var b=z,l=b.length,k,c,y,q,g;r<l;)if(k=b.charAt(r),-1<"\t\r\n ".indexOf(k))r++;else{if(-1<"{}[]:,".indexOf(k))return r++,k;if('"'==k){c="@";for(r++;r<l;)if(k=b.charAt(r)," ">k)d();else if("\\"==k)if(k=b.charAt(++r),-1<'\\"/btnfr'.indexOf(k))c+=x[k],r++;else if("u"==k){y=++r;for(q=r+4;r<q;r++)k=b.charAt(r),"0"<=k&&"9">=k||"a"<=k&&"f">=
k||"A"<=k&&"F">=k||d();c+=u("0x"+b.slice(y,r))}else d();else{if('"'==k)break;c+=k;r++}if('"'==b.charAt(r))return r++,c}else{y=r;"-"==k&&(g=e,k=b.charAt(++r));if("0"<=k&&"9">=k){for("0"==k&&(k=b.charAt(r+1),"0"<=k&&"9">=k)&&d();r<l&&(k=b.charAt(r),"0"<=k&&"9">=k);r++);if("."==b.charAt(r)){for(q=++r;q<l&&(k=b.charAt(q),"0"<=k&&"9">=k);q++);q==r&&d();r=q}k=b.charAt(r);if("e"==k||"E"==k){k=b.charAt(++r);"+"!=k&&"-"!=k||r++;for(q=r;q<l&&(k=b.charAt(q),"0"<=k&&"9">=k);q++);q==r&&d();r=q}return+b.slice(y,
r)}g&&d();if("true"==b.slice(r,r+4))return r+=4,e;if("false"==b.slice(r,r+5))return r+=5,!1;if("null"==b.slice(r,r+4))return r+=4,f}d()}return"$"},y=function(b){var k,c;"$"==b&&d();if("string"==typeof b){if("@"==b.charAt(0))return b.slice(1);if("["==b){for(k=[];;c||(c=e)){b=l();if("]"==b)break;c&&(","==b?(b=l(),"]"==b&&d()):d());","==b&&d();k.push(y(b))}return k}if("{"==b){for(k={};;c||(c=e)){b=l();if("}"==b)break;c&&(","==b?(b=l(),"}"==b&&d()):d());","!=b&&"string"==typeof b&&"@"==b.charAt(0)&&":"==
l()||d();k[b.slice(1)]=y(l())}return k}d()}return b},q=function(d,l,c){c=k(d,l,c);c===b?delete d[l]:d[l]=c},k=function(d,b,l){var k=d[b],c;if("object"==typeof k&&k)if("[object Array]"==g.call(k))for(c=k.length;c--;)q(k,c,l);else n(k,function(d){q(k,d,l)});return l.call(d,b,k)},m.parse=function(b,c){var q,e;r=0;z=b;q=y(l());"$"!=l()&&d();r=z=f;return c&&"[object Function]"==g.call(c)?k((e={},e[""]=q,e),"",c):q}));p&&define(function(){return m})})();(function(c){var b={VERSION:"1.0.0",COMPILER_REVISION:4,REVISION_CHANGES:{1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},helpers:{},partials:{}},e=Object.prototype.toString;b.registerHelper=function(d,l,c){if("[object Object]"===e.call(d)){if(c||l)throw new b.Exception("Arg not supported with multiple helpers");b.Utils.extend(this.helpers,d)}else c&&(l.not=c),this.helpers[d]=l};b.registerPartial=function(d,l){"[object Object]"===e.call(d)?b.Utils.extend(this.partials,d):this.partials[d]=
l};b.registerHelper("helperMissing",function(d){if(2===arguments.length)return c;throw Error("Missing helper: '"+d+"'");});b.registerHelper("blockHelperMissing",function(d,l){var c=l.inverse||function(){},k=l.fn,q=e.call(d);"[object Function]"===q&&(d=d.call(this));return!0===d?k(this):!1===d||null==d?c(this):"[object Array]"===q?0<d.length?b.helpers.each(d,l):c(this):k(d)});b.K=function(){};b.createFrame=Object.create||function(d){b.K.prototype=d;d=new b.K;b.K.prototype=null;return d};b.logger={DEBUG:0,
INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(d,l){if(b.logger.level<=d){var c=b.logger.methodMap[d];"undefined"!==typeof console&&console[c]&&console[c].call(console,l)}}};b.log=function(d,l){b.logger.log(d,l)};b.registerHelper("each",function(d,l){var c=l.fn,k=l.inverse,q=0,f="",g;"[object Function]"===e.call(d)&&(d=d.call(this));l.data&&(g=b.createFrame(l.data));if(d&&"object"===typeof d)if(d instanceof Array)for(var m=d.length;q<m;q++)g&&(g.index=
q),f+=c(d[q],{data:g});else for(m in d)d.hasOwnProperty(m)&&(g&&(g.key=m),f+=c(d[m],{data:g}),q++);0===q&&(f=k(this));return f});b.registerHelper("if",function(d,l){"[object Function]"===e.call(d)&&(d=d.call(this));return!d||b.Utils.isEmpty(d)?l.inverse(this):l.fn(this)});b.registerHelper("unless",function(d,l){return b.helpers["if"].call(this,d,{fn:l.inverse,inverse:l.fn})});b.registerHelper("with",function(d,l){"[object Function]"===e.call(d)&&(d=d.call(this));if(!b.Utils.isEmpty(d))return l.fn(d)});
b.registerHelper("log",function(d,l){var c=l.data&&null!=l.data.level?parseInt(l.data.level,10):1;b.log(c,d)});var f=function(){function d(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,
params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,
2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(d,b,l,c,y,e,f){d=e.length-1;switch(y){case 1:return e[d-1];case 2:this.$=new c.ProgramNode([],e[d]);break;case 3:this.$=new c.ProgramNode(e[d-2],e[d]);break;case 4:this.$=new c.ProgramNode(e[d-1],
[]);break;case 5:this.$=new c.ProgramNode(e[d]);break;case 6:this.$=new c.ProgramNode([],[]);break;case 7:this.$=new c.ProgramNode([]);break;case 8:this.$=[e[d]];break;case 9:e[d-1].push(e[d]);this.$=e[d-1];break;case 10:this.$=new c.BlockNode(e[d-2],e[d-1].inverse,e[d-1],e[d]);break;case 11:this.$=new c.BlockNode(e[d-2],e[d-1],e[d-1].inverse,e[d]);break;case 12:this.$=e[d];break;case 13:this.$=e[d];break;case 14:this.$=new c.ContentNode(e[d]);break;case 15:this.$=new c.CommentNode(e[d]);break;case 16:this.$=
new c.MustacheNode(e[d-1][0],e[d-1][1]);break;case 17:this.$=new c.MustacheNode(e[d-1][0],e[d-1][1]);break;case 18:this.$=e[d-1];break;case 19:this.$=new c.MustacheNode(e[d-1][0],e[d-1][1],"&"===e[d-2][2]);break;case 20:this.$=new c.MustacheNode(e[d-1][0],e[d-1][1],!0);break;case 21:this.$=new c.PartialNode(e[d-1]);break;case 22:this.$=new c.PartialNode(e[d-2],e[d-1]);break;case 24:this.$=[[e[d-2]].concat(e[d-1]),e[d]];break;case 25:this.$=[[e[d-1]].concat(e[d]),null];break;case 26:this.$=[[e[d-1]],
e[d]];break;case 27:this.$=[[e[d]],null];break;case 28:this.$=[[e[d]],null];break;case 29:e[d-1].push(e[d]);this.$=e[d-1];break;case 30:this.$=[e[d]];break;case 31:this.$=e[d];break;case 32:this.$=new c.StringNode(e[d]);break;case 33:this.$=new c.IntegerNode(e[d]);break;case 34:this.$=new c.BooleanNode(e[d]);break;case 35:this.$=e[d];break;case 36:this.$=new c.HashNode(e[d]);break;case 37:e[d-1].push(e[d]);this.$=e[d-1];break;case 38:this.$=[e[d]];break;case 39:this.$=[e[d-2],e[d]];break;case 40:this.$=
[e[d-2],new c.StringNode(e[d])];break;case 41:this.$=[e[d-2],new c.IntegerNode(e[d])];break;case 42:this.$=[e[d-2],new c.BooleanNode(e[d])];break;case 43:this.$=[e[d-2],e[d]];break;case 44:this.$=new c.PartialNameNode(e[d]);break;case 45:this.$=new c.PartialNameNode(new c.StringNode(e[d]));break;case 46:this.$=new c.PartialNameNode(new c.IntegerNode(e[d]));break;case 47:this.$=new c.DataNode(e[d]);break;case 48:this.$=new c.IdNode(e[d]);break;case 49:e[d-2].push({part:e[d],separator:e[d-1]});this.$=
e[d-2];break;case 50:this.$=[{part:e[d]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,
8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],
16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],
39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],
36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},
{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],
33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,
11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,
37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],
23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(d,b){throw Error(d);},parse:function(d){var b=[0],l=[null],c=[],e=this.table,y="",f=0,g=0,m=0;this.lexer.setInput(d);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});d=this.lexer.yylloc;c.push(d);var n=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,p,v,s,u={},t,w;;){v=
b[b.length-1];if(this.defaultActions[v])s=this.defaultActions[v];else{if(null===h||"undefined"==typeof h)h=this.lexer.lex()||1,"number"!==typeof h&&(h=this.symbols_[h]||h);s=e[v]&&e[v][h]}if("undefined"===typeof s||!s.length||!s[0]){var x="";if(!m){w=[];for(t in e[v])this.terminals_[t]&&2<t&&w.push("'"+this.terminals_[t]+"'");x=this.lexer.showPosition?"Parse error on line "+(f+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+
(f+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'");this.parseError(x,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:d,expected:w})}}if(s[0]instanceof Array&&1<s.length)throw Error("Parse Error: multiple actions possible at state: "+v+", token: "+h);switch(s[0]){case 1:b.push(h);l.push(this.lexer.yytext);c.push(this.lexer.yylloc);b.push(s[1]);h=null;p?(h=p,p=null):(g=this.lexer.yyleng,y=this.lexer.yytext,f=this.lexer.yylineno,d=this.lexer.yylloc,
0<m&&m--);break;case 2:w=this.productions_[s[1]][1];u.$=l[l.length-w];u._$={first_line:c[c.length-(w||1)].first_line,last_line:c[c.length-1].last_line,first_column:c[c.length-(w||1)].first_column,last_column:c[c.length-1].last_column};n&&(u._$.range=[c[c.length-(w||1)].range[0],c[c.length-1].range[1]]);v=this.performAction.call(u,y,g,f,this.yy,s[1],l,c);if("undefined"!==typeof v)return v;w&&(b=b.slice(0,-2*w),l=l.slice(0,-1*w),c=c.slice(0,-1*w));b.push(this.productions_[s[1]][0]);l.push(u.$);c.push(u._$);
s=e[b[b.length-2]][b[b.length-1]];b.push(s);break;case 3:return!0}}return!0}},c=function(){return{EOF:1,parseError:function(d,b){if(this.yy.parser)this.yy.parser.parseError(d,b);else throw Error(d);},setInput:function(d){this._input=d;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},
input:function(){var d=this._input[0];this.yytext+=d;this.yyleng++;this.offset++;this.match+=d;this.matched+=d;d.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return d},unput:function(d){var b=d.length,l=d.split(/(?:\r\n?|\n)/g);this._input=d+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b-1);this.offset-=b;d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,
this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);l.length-1&&(this.yylineno-=l.length-1);var c=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:l?(l.length===d.length?this.yylloc.first_column:0)+d[d.length-l.length].length-l[0].length:this.yylloc.first_column-b};this.options.ranges&&(this.yylloc.range=[c[0],c[0]+this.yyleng-b]);return this},more:function(){this._more=!0;return this},
less:function(d){this.unput(this.match.slice(d))},pastInput:function(){var d=this.matched.substr(0,this.matched.length-this.match.length);return(20<d.length?"...":"")+d.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var d=this.match;20>d.length&&(d+=this._input.substr(0,20-d.length));return(d.substr(0,20)+(20<d.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var d=this.pastInput(),b=Array(d.length+1).join("-");return d+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;
this._input||(this.done=!0);var d,b,l;this._more||(this.match=this.yytext="");for(var c=this._currentRules(),e=0;e<c.length&&(!(b=this._input.match(this.rules[c[e]]))||d&&!(b[0].length>d[0].length)||(d=b,l=e,this.options.flex));e++);if(d){if(b=d[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=b.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+
d[0].length};this.yytext+=d[0];this.match+=d[0];this.matches=d;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(d[0].length);this.matched+=d[0];d=this.performAction.call(this,this.yy,this,c[l],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(d)return d}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+
this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var d=this.next();return"undefined"!==typeof d?d:this.lex()},begin:function(d){this.conditionStack.push(d)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(d){this.begin(d)},options:{},performAction:function(d,b,l,c){switch(l){case 0:return b.yytext=
"\\",14;case 1:"\\"!==b.yytext.slice(-1)&&this.begin("mu");"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1),this.begin("emu"));if(b.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==b.yytext.slice(-1)&&this.popState(),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1)),14;case 4:return b.yytext=b.yytext.substr(0,b.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;
case 12:this.popState();this.begin("com");break;case 13:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),31;case 23:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;
case 28:return 36;case 29:return b.yytext=b.yytext.substr(1,b.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},rules:[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,
/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}}}}();b.lexer=c;d.prototype=b;b.Parser=d;return new d}();b.Parser=f;b.parse=function(d){if(d.constructor===
b.AST.ProgramNode)return d;b.Parser.yy=b.AST;return b.Parser.parse(d)};b.AST={};b.AST.ProgramNode=function(d,l){this.type="program";this.statements=d;l&&(this.inverse=new b.AST.ProgramNode(l))};b.AST.MustacheNode=function(d,b,c){this.type="mustache";this.escaped=!c;this.hash=b;c=this.id=d[0];d=this.params=d.slice(1);this.isHelper=(this.eligibleHelper=c.isSimple)&&(d.length||b)};b.AST.PartialNode=function(d,b){this.type="partial";this.partialName=d;this.context=b};b.AST.BlockNode=function(d,l,c,e){if(d.id.original!==
e.original)throw new b.Exception(d.id.original+" doesn't match "+e.original);this.type="block";this.mustache=d;this.program=l;(this.inverse=c)&&!this.program&&(this.isInverse=!0)};b.AST.ContentNode=function(d){this.type="content";this.string=d};b.AST.HashNode=function(d){this.type="hash";this.pairs=d};b.AST.IdNode=function(d){this.type="ID";for(var l="",c=[],e=0,f=0,g=d.length;f<g;f++){var m=d[f].part,l=l+((d[f].separator||"")+m);if(".."===m||"."===m||"this"===m){if(0<c.length)throw new b.Exception("Invalid path: "+
l);".."===m?e++:this.isScoped=!0}else c.push(m)}this.original=l;this.parts=c;this.string=c.join(".");this.depth=e;this.isSimple=1===d.length&&!this.isScoped&&0===e;this.stringModeValue=this.string};b.AST.PartialNameNode=function(d){this.type="PARTIAL_NAME";this.name=d.original};b.AST.DataNode=function(d){this.type="DATA";this.id=d};b.AST.StringNode=function(d){this.type="STRING";this.original=this.string=this.stringModeValue=d};b.AST.IntegerNode=function(d){this.type="INTEGER";this.original=this.integer=
d;this.stringModeValue=Number(d)};b.AST.BooleanNode=function(d){this.type="BOOLEAN";this.bool=d;this.stringModeValue="true"===d};b.AST.CommentNode=function(d){this.type="comment";this.comment=d};var g="description fileName lineNumber message name number stack".split(" ");b.Exception=function(d){for(var b=Error.prototype.constructor.apply(this,arguments),c=0;c<g.length;c++)this[g[c]]=b[g[c]]};b.Exception.prototype=Error();b.SafeString=function(d){this.string=d};b.SafeString.prototype.toString=function(){return this.string.toString()};
var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/[&<>"'`]/g,p=/[&<>"'`]/,m=function(d){return h[d]||"&amp;"};b.Utils={extend:function(d,b){for(var c in b)b.hasOwnProperty(c)&&(d[c]=b[c])},escapeExpression:function(d){if(d instanceof b.SafeString)return d.toString();if(null==d||!1===d)return"";d=d.toString();return p.test(d)?d.replace(n,m):d},isEmpty:function(d){return d||0===d?"[object Array]"===e.call(d)&&0===d.length?!0:!1:!0}};var v=b.Compiler=function(){};v.prototype=
{compiler:v,disassemble:function(){for(var d=this.opcodes,b,c=[],e,f,g=0,m=d.length;g<m;g++)if(b=d[g],"DECLARE"===b.opcode)c.push("DECLARE "+b.name+"="+b.value);else{e=[];for(var h=0;h<b.args.length;h++)f=b.args[h],"string"===typeof f&&(f='"'+f.replace("\n","\\n")+'"'),e.push(f);c.push(b.opcode+" "+e.join(" "))}return c.join("\n")},equals:function(d){var b=this.opcodes.length;if(d.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var e=this.opcodes[c],f=d.opcodes[c];if(e.opcode!==f.opcode||e.args.length!==
f.args.length)return!1;for(var g=0;g<e.args.length;g++)if(e.args[g]!==f.args[g])return!1}b=this.children.length;if(d.children.length!==b)return!1;for(c=0;c<b;c++)if(!this.children[c].equals(d.children[c]))return!1;return!0},guid:0,compile:function(d,b){this.children=[];this.depths={list:[]};this.options=b;var c=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(c)for(var e in c)this.options.knownHelpers[e]=c[e];
return this.program(d)},accept:function(d){return this[d.type](d)},program:function(d){d=d.statements;var b;this.opcodes=[];for(var c=0,e=d.length;c<e;c++)b=d[c],this[b.type](b);this.isSimple=1===e;this.depths.list=this.depths.list.sort(function(d,b){return d-b});return this},compileProgram:function(d){d=(new this.compiler).compile(d,this.options);var b=this.guid++,c;this.usePartial=this.usePartial||d.usePartial;this.children[b]=d;for(var e=0,f=d.depths.list.length;e<f;e++)c=d.depths.list[e],2>c||
this.addDepth(c-1);return b},block:function(d){var b=d.mustache,c=d.program;d=d.inverse;c&&(c=this.compileProgram(c));d&&(d=this.compileProgram(d));var e=this.classifyMustache(b);"helper"===e?this.helperMustache(b,c,d):"simple"===e?(this.simpleMustache(b),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(b,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));
this.opcode("append")},hash:function(d){d=d.pairs;var b,c;this.opcode("pushHash");for(var e=0,f=d.length;e<f;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(d){var b=d.partialName;this.usePartial=!0;d.context?this.ID(d.context):this.opcode("push","depth0");this.opcode("invokePartial",b.name);
this.opcode("append")},content:function(d){this.opcode("appendContent",d.string)},mustache:function(d){var b=this.options,c=this.classifyMustache(d);"simple"===c?this.simpleMustache(d):"helper"===c?this.helperMustache(d):this.ambiguousMustache(d);d.escaped&&!b.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(d,b,c){d=d.id;var e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth);this.opcode("pushProgram",b);this.opcode("pushProgram",c);this.opcode("invokeAmbiguous",
e,f)},simpleMustache:function(d){d=d.id;"DATA"===d.type?this.DATA(d):d.parts.length?this.ID(d):(this.addDepth(d.depth),this.opcode("getContext",d.depth),this.opcode("pushContext"));this.opcode("resolvePossibleLambda")},helperMustache:function(d,b,c){b=this.setupFullMustacheParams(d,b,c);d=d.id.parts[0];if(this.options.knownHelpers[d])this.opcode("invokeKnownHelper",b.length,d);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+d);this.opcode("invokeHelper",
b.length,d)}},ID:function(d){this.addDepth(d.depth);this.opcode("getContext",d.depth);d.parts[0]?this.opcode("lookupOnContext",d.parts[0]):this.opcode("pushContext");for(var b=1,c=d.parts.length;b<c;b++)this.opcode("lookup",d.parts[b])},DATA:function(d){this.options.data=!0;if(d.id.isScoped||d.id.depth)throw new b.Exception("Scoped data references are not supported: "+d.original);this.opcode("lookupData");d=d.id.parts;for(var c=0,e=d.length;c<e;c++)this.opcode("lookup",d[c])},STRING:function(d){this.opcode("pushString",
d.string)},INTEGER:function(d){this.opcode("pushLiteral",d.integer)},BOOLEAN:function(d){this.opcode("pushLiteral",d.bool)},comment:function(){},opcode:function(d){this.opcodes.push({opcode:d,args:[].slice.call(arguments,1)})},declare:function(d,b){this.opcodes.push({opcode:"DECLARE",name:d,value:b})},addDepth:function(d){if(isNaN(d))throw Error("EWOT");0===d||this.depths[d]||(this.depths[d]=!0,this.depths.list.push(d))},classifyMustache:function(d){var b=d.isHelper,c=d.eligibleHelper,e=this.options;
c&&!b&&(e.knownHelpers[d.id.parts[0]]?b=!0:e.knownHelpersOnly&&(c=!1));return b?"helper":c?"ambiguous":"simple"},pushParams:function(d){for(var b=d.length,c;b--;)if(c=d[b],this.options.stringParams)c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type);else this[c.type](c)},setupMustacheParams:function(d){var b=d.params;this.pushParams(b);d.hash?this.hash(d.hash):this.opcode("emptyHash");return b},setupFullMustacheParams:function(d,
b,c){var e=d.params;this.pushParams(e);this.opcode("pushProgram",b);this.opcode("pushProgram",c);d.hash?this.hash(d.hash):this.opcode("emptyHash");return e}};b.precompile=function(d,c){if(null==d||"string"!==typeof d&&d.constructor!==b.AST.ProgramNode)throw new b.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+d);c=c||{};"data"in c||(c.data=!0);var e=b.parse(d),e=(new v).compile(e,c);return(new b.JavaScriptCompiler).compile(e,c)};b.compile=function(d,l){if(null==
d||"string"!==typeof d&&d.constructor!==b.AST.ProgramNode)throw new b.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+d);l=l||{};"data"in l||(l.data=!0);var e;return function(k,f){if(!e){var g=b.parse(d),g=(new v).compile(g,l),g=(new b.JavaScriptCompiler).compile(g,l,c,!0);e=b.template(g)}return e.call(this,k,f)}};var s=function(d){this.value=d},t=b.JavaScriptCompiler=function(){};t.prototype={nameLookup:function(d,b){return/^[0-9]+$/.test(b)?d+"["+b+"]":t.isValidJavaScriptVariableName(b)?
d+"."+b:d+"['"+b+"']"},appendToBuffer:function(d){return this.environment.isSimple?"return "+d+";":{appendToBuffer:!0,content:d,toString:function(){return"buffer += "+d+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(d,c,e,k){this.environment=d;this.options=c||{};b.log(b.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!e;this.context=e||{programs:[],environments:[],aliases:{}};this.preamble();
this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(d,c);d=d.opcodes;this.i=0;for(e=d.length;this.i<e;this.i++)c=d[this.i],"DECLARE"===c.opcode?this[c.name]=c.value:this[c.opcode].apply(this,c.args);return this.createFunctionContext(k)},nextOpcode:function(){return this.environment.opcodes[this.i+1]},eat:function(){this.i+=1},preamble:function(){var d=[];if(this.isChild)d.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+
b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);");this.options.data&&(c+=" data = data || {};");d.push(c)}this.environment.isSimple?d.push(""):d.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=d},createFunctionContext:function(d){var c=this.stackVars.concat(this.registers.list);0<c.length&&(this.source[1]=this.source[1]+", "+c.join(", "));if(!this.isChild)for(var e in this.context.aliases)this.context.aliases.hasOwnProperty(e)&&
(this.source[1]=this.source[1]+", "+e+"="+this.context.aliases[e]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";");this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n");this.environment.isSimple||this.source.push("return buffer;");c=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];e=0;for(var k=this.environment.depths.list.length;e<k;e++)c.push("depth"+this.environment.depths.list[e]);e=this.mergeSource();this.isChild||
(k=b.COMPILER_REVISION,e="this.compilerInfo = ["+k+",'"+b.REVISION_CHANGES[k]+"'];\n"+e);if(d)return c.push(e),Function.apply(this,c);d="function "+(this.name||"")+"("+c.join(",")+") {\n "+e+"}";b.log(b.logger.DEBUG,d+"\n\n");return d},mergeSource:function(){for(var d="",b,e=0,k=this.source.length;e<k;e++){var f=this.source[e];f.appendToBuffer?b=b?b+"\n + "+f.content:f.content:(b&&(d+="buffer += "+b+";\n ",b=c),d+=f+"\n ")}return d},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";
var d=["depth0"];this.setupParams(0,d);this.replaceStack(function(b){d.splice(1,0,b);return"blockHelperMissing.call("+d.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var d=["depth0"];this.setupParams(0,d);var b=this.topStack();d.splice(1,0,b);d[d.length-1]="options";this.source.push("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+d.join(", ")+"); }")},appendContent:function(d){this.source.push(this.appendToBuffer(this.quotedString(d)))},
append:function(){this.flushInline();var d=this.popStack();this.source.push("if("+d+" || "+d+" === 0) { "+this.appendToBuffer(d)+" }");this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(d){this.lastContext!==d&&(this.lastContext=d)},lookupOnContext:function(d){this.push(this.nameLookup("depth"+
this.lastContext,d,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(d){return"typeof "+d+" === functionType ? "+d+".apply(depth0) : "+d})},lookup:function(d){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,d,"context")})},lookupData:function(d){this.push("data")},pushStringParam:function(d,b){this.pushStackLiteral("depth"+
this.lastContext);this.pushString(b);"string"===typeof d?this.pushString(d):this.pushStackLiteral(d)},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var d=this.hash;this.hash=c;this.options.stringParams&&(this.register("hashContexts","{"+d.contexts.join(",")+"}"),this.register("hashTypes","{"+d.types.join(",")+"}"));this.push("{\n "+
d.values.join(",\n ")+"\n }")},pushString:function(d){this.pushStackLiteral(this.quotedString(d))},push:function(d){this.inlineStack.push(d);return d},pushLiteral:function(d){this.pushStackLiteral(d)},pushProgram:function(d){null!=d?this.pushStackLiteral(this.programExpression(d)):this.pushStackLiteral(null)},invokeHelper:function(d,b){this.context.aliases.helperMissing="helpers.helperMissing";var c=this.lastHelper=this.setupHelper(d,b,!0),e=this.nameLookup("depth"+this.lastContext,b,"context");this.push(c.name+
" || "+e);this.replaceStack(function(b){return b+" ? "+b+".call("+c.callParams+") : helperMissing.call("+c.helperMissingParams+")"})},invokeKnownHelper:function(b,c){var e=this.setupHelper(b,c);this.push(e.name+".call("+e.callParams+")")},invokeAmbiguous:function(b,c){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var e=this.setupHelper(0,b,c),k=this.lastHelper=this.nameLookup("helpers",b,"helper"),f=this.nameLookup("depth"+this.lastContext,b,"context"),g=this.nextStack();
this.source.push("if ("+g+" = "+k+") { "+g+" = "+g+".call("+e.callParams+"); }");this.source.push("else { "+g+" = "+f+"; "+g+" = typeof "+g+" === functionType ? "+g+".apply(depth0) : "+g+"; }")},invokePartial:function(b){b=[this.nameLookup("partials",b,"partial"),"'"+b+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(b){var c=this.popStack(),e,k;this.options.stringParams&&
(k=this.popStack(),e=this.popStack());var f=this.hash;e&&f.contexts.push("'"+b+"': "+e);k&&f.types.push("'"+b+"': "+k);f.values.push("'"+b+"': ("+c+")")},compiler:t,compileChildren:function(b,c){for(var e=b.children,k,f,g=0,m=e.length;g<m;g++){k=e[g];f=new this.compiler;var h=this.matchExistingProgram(k);null==h?(this.context.programs.push(""),h=this.context.programs.length,k.index=h,k.name="program"+h,this.context.programs[h]=f.compile(k,c,this.context),this.context.environments[h]=k):(k.index=h,
k.name="program"+h)}},matchExistingProgram:function(b){for(var c=0,e=this.context.environments.length;c<e;c++){var k=this.context.environments[c];if(k&&k.equals(b))return c}},programExpression:function(b){this.context.aliases.self="this";if(null==b)return"self.noop";var c=this.environment.children[b];b=c.depths.list;for(var e=[c.index,c.name,"data"],k=0,f=b.length;k<f;k++)c=b[k],1===c?e.push("depth0"):e.push("depth"+(c-1));return(0===b.length?"self.program(":"self.programWithDepth(")+e.join(", ")+
")"},register:function(b,c){this.useRegister(b);this.source.push(b+" = "+c+";")},useRegister:function(b){this.registers[b]||(this.registers[b]=!0,this.registers.list.push(b))},pushStackLiteral:function(b){return this.push(new s(b))},pushStack:function(b){this.flushInline();var c=this.incrStack();b&&this.source.push(c+" = "+b+";");this.compileStack.push(c);return c},replaceStack:function(b){var c="",e=this.isInline(),k;e?(k=this.popStack(!0),k instanceof s?k=k.value:(c=this.stackSlot?this.topStackName():
this.incrStack(),c="("+this.push(c)+" = "+k+"),",k=this.topStack())):k=this.topStack();b=b.call(this,k);e?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+c+b+")")):(/^stack/.test(k)||(k=this.nextStack()),this.source.push(k+" = ("+c+b+");"));return k},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+
this.stackSlot},flushInline:function(){var b=this.inlineStack;if(b.length){this.inlineStack=[];for(var c=0,e=b.length;c<e;c++){var k=b[c];k instanceof s?this.compileStack.push(k):this.pushStack(k)}}},isInline:function(){return this.inlineStack.length},popStack:function(b){var c=this.isInline(),e=(c?this.inlineStack:this.compileStack).pop();if(!b&&e instanceof s)return e.value;c||this.stackSlot--;return e},topStack:function(b){var c=this.isInline()?this.inlineStack:this.compileStack,c=c[c.length-1];
return!b&&c instanceof s?c.value:c},quotedString:function(b){return'"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(b,c,e){var k=[];this.setupParams(b,k,e);b=this.nameLookup("helpers",c,"helper");return{params:k,name:b,callParams:["depth0"].concat(k).join(", "),helperMissingParams:e&&["depth0",this.quotedString(c)].concat(k).join(", ")}},setupParams:function(b,c,e){var k=[],
f=[],g=[],m,h;k.push("hash:"+this.popStack());m=this.popStack();if((h=this.popStack())||m)h||(this.context.aliases.self="this",h="self.noop"),m||(this.context.aliases.self="this",m="self.noop"),k.push("inverse:"+m),k.push("fn:"+h);for(h=0;h<b;h++)m=this.popStack(),c.push(m),this.options.stringParams&&(g.push(this.popStack()),f.push(this.popStack()));this.options.stringParams&&(k.push("contexts:["+f.join(",")+"]"),k.push("types:["+g.join(",")+"]"),k.push("hashContexts:hashContexts"),k.push("hashTypes:hashTypes"));
this.options.data&&k.push("data:data");k="{"+k.join(",")+"}";e?(this.register("options",k),c.push("options")):c.push(k);return c.join(", ")}};for(var f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),
w=t.RESERVED_WORDS={},u=0,x=f.length;u<x;u++)w[f[u]]=!0;t.isValidJavaScriptVariableName=function(b){return!t.RESERVED_WORDS[b]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(b)?!0:!1};b.VM={template:function(d){var c={escapeExpression:b.Utils.escapeExpression,invokePartial:b.VM.invokePartial,programs:[],program:function(d,c,e){var l=this.programs[d];e?l=b.VM.program(d,c,e):l||(l=this.programs[d]=b.VM.program(d,c));return l},merge:function(d,c){var e=d||c;d&&c&&(e={},b.Utils.extend(e,c),b.Utils.extend(e,d));return e},
programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(e,f){f=f||{};var g=d.call(c,b,e,f.helpers,f.partials,f.data),m=c.compilerInfo||[],h=m[0]||1,n=b.COMPILER_REVISION;if(h!==n){if(h<n)throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+b.REVISION_CHANGES[n]+") or downgrade your runtime to an older version ("+b.REVISION_CHANGES[h]+").";throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+
m[1]+").";}return g}},programWithDepth:function(b,c,e){var f=Array.prototype.slice.call(arguments,3),g=function(b,d){d=d||{};return c.apply(this,[b,d.data||e].concat(f))};g.program=b;g.depth=f.length;return g},program:function(b,c,e){var f=function(b,d){d=d||{};return c(b,d.data||e)};f.program=b;f.depth=0;return f},noop:function(){return""},invokePartial:function(d,e,f,k,g,m){k={helpers:k,partials:g,data:m};if(d===c)throw new b.Exception("The partial "+e+" could not be found");if(d instanceof Function)return d(f,
k);if(b.compile)return g[e]=b.compile(d,{data:m!==c}),g[e](f,k);throw new b.Exception("The partial "+e+" could not be compiled when running in runtime-only mode");}};b.template=b.VM.template;"object"===typeof module&&module.exports?module.exports=b:"function"===typeof define&&define.amd?define(function(){return b}):this.Handlebars=b}).call(this);window.appstorm=window.a=function(){var c={},b={url:"",contains:function(b,c){if(b instanceof Array)for(var e=b.length;e--;){if(b[e]===c)return!0}else if(this.isObject(b))return c in b;return!1},clone:function(b){if(a.isObject(b)){if(a.isArray(b))for(var c=b.length,e=Array(c),n=0;n<c;++n)e[n]=a.clone(b[n]);else for(c in e={},a.isFunction(b.constructor)&&(e=new b.constructor),a.isObject(b.prototype)&&(e.prototype=b.prototype),b)e[c]=a.clone(b[c]);return e}return b},getStackTrace:function(){return Error().stack},
isNumber:function(b){return!isNaN(parseFloat(b))&&isFinite(b)},isObject:function(b){return"object"===typeof b&&null!==b},isString:function(b){return"string"===typeof b},isFunction:function(b){return"function"===typeof b},isNull:function(b){return"undefined"===typeof b||null===b},isBoolean:function(b){return"boolean"===typeof b},isArray:function(b){return b instanceof Array},setDefaultAjaxOptions:function(b){a.isObject(b)&&(c=b)},getDefaultAjaxOptions:function(){return c}},e=document.getElementById("a-core");
e&&"undefined"!==typeof e.src&&(b.url=e.src.replace(/\/[^/]*$/,"/"));return b}();a.ajax=function(c,b,e){var f=a.getDefaultAjaxOptions();this.params={url:"",method:"GET",type:"raw",async:!0,cache:!1,data:{},header:{}};for(var g in this.params)"data"!==g&&"header"!==g&&(g in f&&typeof f[g]===typeof this.params[g]&&(this.params[g]=f[g]),g in c&&typeof c[g]===typeof this.params[g]&&(this.params[g]=c[g]));if(a.isObject(f.data))for(var h in f.data)this.params.data[h]=f.data[h];if(a.isObject(f.header))for(var n in f.header)this.params.header[n]=f.header[n];if(a.isString(c.data))this.params.data=
c.data;else if(a.isObject(c.data))for(var p in c.data)this.params.data[p]=c.data[p];if(a.isObject(c.header))for(var m in c.header)this.params.header[m]=c.header[m];this.success=a.isFunction(b)?b:function(){};this.error=a.isFunction(e)?e:function(){};this.request=null;if(a.isNull(window.XMLHttpRequest)){c=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var v in c)try{this.request=new ActiveXObject(c[v])}catch(s){}}else this.request=new XMLHttpRequest};
a.ajax.prototype.parseResult=function(c,b){if(204===b.status)return"";var e=c.type.toLowerCase();return"json"===e?a.parser.json.parse(b.responseText):"xml"===e?b.responseXML:b.responseText};a.ajax.prototype.abort=function(){try{this.request.abort()}catch(c){}};
a.ajax.prototype.send=function(){var c=this.params.method.toUpperCase();if(!1===this.params.cache){var b=Math.floor(1E5*Math.random())+1;try{this.params.data.cachedisable=b}catch(e){}}b="";if(a.isString(this.params.data))b=this.params.data;else{for(var f in this.params.data)b+=encodeURIComponent(f)+"="+encodeURIComponent(this.params.data[f])+"&";b=b.slice(0,-1)}var g=this.params.url;f=this.params.async;"GET"===c&&""!==b&&(g+="?"+b);if(!0===f){var h={success:this.success,params:this.params,error:this.error,
request:this.request,parseResult:this.parseResult};this.request.onreadystatechange=function(){if(4===h.request.readyState){var b=200<=h.request.status&&400>h.request.status;b?h.success(h.parseResult(h.params,h.request),h.request.status):h.error(g,h.request.status);a.message.dispatch("a.ajax",{success:b,status:h.request.status,url:h.params.url,method:h.method,params:h.params})}}}this.request.open(c,g,f);var n=["Content-Type","Content-type","content-type"],p=!1,m;for(m in this.params.header)this.request.setRequestHeader(m,
this.params.header[m]),!p&&a.contains(n,m)&&(p=!0);p||"POST"!==c||this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.request.send(b);return!1===f?this.parseResult(this.params,this.request):"No return in async mode"};a.console=function(){function c(c,f,g,h){a.isArray(b[c])||(c="log");b[c].push(f);if(!a.isNull(window.console)&&a.isFunction(window.console.log)&&!1!==h)switch(a.environment.get("console")){case "error":if("error"!==c)break;case "warning":case "warn":if("warn"!==c&&"error"!==c)break;case "info":if("log"===c)break;default:h=!0;var n=!1;if(a.isString(f)&&0<=f.indexOf(":"))for(var p=f.substr(0,f.indexOf(":")).split("."),m=p.length;m--;){var v="verbose-"+p.join("."),v=a.environment.get(v);if(!a.isNull(v)){n=
!0;h=v<g?!1:!0;break}p.pop()}n||(a.isNull(a.environment.get("verbose"))||a.isNull(g))||parseInt(a.environment.get("verbose"),10)<g&&(h=!1);if(h)window.console[c](f)}for(;2E3<b[c].length;)b[c].shift()}var b={log:[],warn:[],info:[],error:[]};return{log:function(b,f,g){c("log",b,f,g)},warn:function(b,f,g){c("warn",b,f,g)},info:function(b,f,g){c("info",b,f,g)},error:function(b,f,g){c("error",b,f,g)},trace:function(c){return a.isString(c)&&c in b?b[c]:b},clear:function(){b={log:[],warn:[],info:[],error:[]}}}}();a.dom={query:function(c,b){b=a.isObject(b)?b:document;return!b.querySelectorAll&&window.jQuery?this.el(jQuery(c)):this.el(b.querySelectorAll(c))},el:function(c){if(window.jQuery&&c instanceof jQuery){for(var b=[],e=c.size();e--;)b.push(c.get(e));c=b}return a.isArray(c)?new this.children(c):new this.children([c])},id:function(c){return this.attr("id",c,document)},cls:function(c,b){return this.attr("class",c,b)},tag:function(c,b){b=a.isObject(b)?b:document;var e=a.isString(c)?c.replace(/ /g,"").split(","):
c,f=[],g=e.length;if(1<g){for(;g--;)for(var h=this.tag(e[g],b).getElements(),n=h.length;n--;)a.contains(f,h[n])||f.push(h[n]);return new a.dom.children(f)}f=b.querySelectorAll?b.querySelectorAll(c):b.getElementsByTagName(c);return new a.dom.children(f)},attr:function(c,b,e){function f(b,c){for(var e=c.length;e--;)a.contains(b,c[e])||b.push(c[e])}if(a.isNull(e)){a.isNull(b)&&(b=document);if(a.isObject(b))return this.attr(c,null,b);e=document}if(c&&(a.isArray(c)||0<=c.indexOf(","))){var g=a.isString(c)?
c.replace(/ /g,"").split(","):c,h=g.length;if(1<h){for(var n=[];h--;){var p=this.attr(g[h],b,e),p=p.getElements();f(n,p)}return new a.dom.children(n)}}if(b&&(a.isArray(b)||0<b.indexOf(","))&&(g=a.isString(b)?b.replace(/ /g,"").split(","):b,h=g.length,1<h)){for(n=[];h--;)p=this.attr(c,g[h],e),p=p.getElements(),f(n,p);return new a.dom.children(n)}g=a.isString(b);n=[];c=c.replace(/ /g,"");b=b.replace(/ /g,"");if("class"==c)n=e.getElementsByClassName(b);else if("id"==c)n=[e.getElementById(b)];else if(e.querySelectorAll)n=
e.querySelectorAll(g?"["+c+'="'+b+'"]':"["+c+"]");else for(e=e.getElementsByTagName("*"),h=e.length;h--;){var p=e[h],m=p.getAttribute(c);m&&(g&&m==b||!g)&&(a.contains(n,p)||n.push(p))}return new a.dom.children(n)}};a.dom.children=function(c){this.elementList=c="undefined"===typeof c.length?[c]:c;this.length=c.length};
a.dom.children.prototype={_perform:function(){var c=[],b=this.elementList,e=Array.prototype.slice.call(arguments),f=e[0],e=e.slice(1),g=e.length,h=b.length;for(e.push(null);h--;){e[g]=b[h];for(var n=f.apply(a.dom,e).getElements(),p=n.length;p--;)a.contains(c,n[p])||c.push(n[p])}this.elementList=c;this.length=c.length;return this},get:function(c){return this.elementList[c]||null},getElements:function(){return this.elementList},id:function(c){return this._perform(a.dom.id,c)},cls:function(c){return this._perform(a.dom.cls,
c)},css:function(c,b){if("undefined"===typeof b){for(var e=[],f=this.elementList,g=f.length;g--;){var h=f[g].style[c];a.isNull(h)||e.push(h)}return 1>=e.length?e[0]||"":e}this.each(function(){this.style[c]=b})},addClass:function(c){this.each(function(){this.classList?this.classList.add(c):this.className.match(RegExp("(\\s|^)"+c+"(\\s|$)"))||(this.className+=" "+c)});return this},hasClass:function(c){c=RegExp("(\\s|^)"+c+"(\\s|$)");for(var b=this.elementList,e=b.length;e--;)if(!b[e].className.match(c))return!1;
return!0},removeClass:function(c){this.each(function(b){this.classList?this.classList.remove(c):(b=RegExp("(\\s|^)"+c+"(\\s|$)"),this.className.match(b)&&this.className.replace(b,""))},this);return this},toggleClass:function(c){this.each(function(b){this.classList?this.classList.toggle(c):(b=RegExp("(\\s|^)"+c+"(\\s|$)"),this.className.match(b)?this.className.replace(b,""):this.className+=" "+c)},this);return this},bind:function(c,b){var e=a.isString(c)?c.split(" "):c;for(i=e.length;i--;)e[i]&&""!=
e[i]&&this.each(function(c){document.addEventListener?this.addEventListener(c,b,!1):document.attachEvent?this.attachEvent("on"+c,b):this["on"+c]=b},e[i].toLowerCase());return this},unbind:function(c,b){var e=a.isString(c)?c.split(" "):c;for(i=e.length;i--;)e[i]&&""!=e[i]&&this.each(function(c){document.removeEventListener?this.removeEventListener(c,b,!1):document.detachEvent?this.detachEvent("on"+c,b):this["on"+c]=void 0},e[i].toLowerCase());return this},tag:function(c){return this._perform(a.dom.tag,
c)},attr:function(c,b){return this._perform(a.dom.attr,c,b)},attribute:function(c,b){if("undefined"===typeof b){for(var e=[],f=this.elementList,g=f.length;g--;)try{var h=f[g].getAttribute();a.isNull(h)||a.contains(e,h)||e.push(h)}catch(n){}return e}this.each(function(){try{this.setAttribute(c,b)}catch(e){}});return this},data:function(c,b){return this.attribute("data-"+c,b)},parent:function(){for(var c=this.elementList,b=c.length;b--;)c[b]=c[b].parentNode;return this},insertBefore:function(c){this.each(function(){this.parentNode.insertBefore(c,
this)});return this},insertAfter:function(c){this.each(function(){this.parentNode.insertBefore(c,this.nextSibling)});return this},empty:function(){this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild)});return this},remove:function(c){this.each(function(){try{this.parentNode.removeChild(c)}catch(b){}});return this},append:function(c){this.each(function(){this.appendChild(c)});return this},replace:function(c){this.empty();this.append(c);return this},each:function(){for(var c=
this.elementList,b=Array.prototype.slice.call(arguments),e=b[0],b=b.slice(1),e=a.isFunction(e)?e:function(){},f=0,g=c.length;f<g;++f)e.apply(c[f],b);return this}};a.environment={_store:{verbose:2,console:"log"},get:function(c){return c in this._store?this._store[c]:null},set:function(c,b){a.isNull(c)||(this._store[c]=b,a.message.dispatch("a.environment.add",{key:c,value:b}))},remove:function(c){a.isNull(this._store[c])||(delete this._store[c],a.message.dispatch("a.environment.remove",{key:c}))},clear:function(){this._store={verbose:2,console:"log"}}};a.loader=function(){function c(b,c){if(a.isNull(b))return!1;for(var e=0,g=f.length;e<g;++e)if(f[e]===b)return a.isFunction(c)&&c(),!0;return!1}function b(b,c,e,h,s,t){for(var w in c)b.setAttribute(w,c[w]);!a.isNull(s)&&s.id&&b.setAttribute("id",s.id);var u=!1,x=function(d){u||(u=!0,a.isFunction(e)&&e(b),(a.isNull(s)||!1!==s.cache)&&f.push(h))};b.addEventListener?b.addEventListener("load",x,!1):b.readyState?b.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||x()}:
b.onload=x;if("text/css"===c.type){var d=document.styleSheets.length;g++;var l=a.timer.add(function(){document.styleSheets.length>d+g-1&&(g--,a.timer.remove(l),x())},null,50)}document.getElementsByTagName("head")[0].appendChild(b)}function e(b,c,e,g){var s={url:b,method:"GET",type:"raw",async:!0,cache:!0,data:{},header:{}};a.console.log("a.loader: load resource (url: "+b+")",3);a.isNull(e)||(a.contains(h,e.method)&&(s.method=e.method),a.isNull(e.type)||"json"!==e.type&&"xml"!==e.type||(s.type=e.type),
a.isObject(e.data)&&(s.data=e.data),a.isObject(e.header)&&(s.header=e.header),a.isBoolean(e.cache)&&(s.cache=e.cache));g=a.isFunction(g)?g:function(){};(new a.ajax(s,function(g,h){a.isFunction(c)&&c(g,h);(a.isNull(e)||!1!==e.cache)&&f.push(b)},g)).send()}var f=[],g=0,h="GET POST PUT DELETE HEAD OPTIONS".split(" ");return{js:function(b,e,f,g){c(b,e)||this.jsonp(b,e,f,g)},jsonp:function(c,e,f,g){var h=a.isObject(f)&&f.type?f.type:"text/javascript";a.console.log("a.loader: load resource (url: "+c+")",
3);b(document.createElement("script"),{type:h,src:c},e,c,f,g)},json:function(b,c,f,g){a.isObject(f)||(f={});f.type="json";a.isObject(f.header)||(f.header={});f.header.accept="application/json, text/javascript";e(b,c,f,g)},xml:function(b,c,f,g){a.isObject(f)||(f={});f.type="xml";a.isObject(f.header)||(f.header={});f.header.accept="application/xml, text/xml";e(b,c,f,g)},css:function(e,f,g,h){c(e,f)||(a.console.log("a.loader: load resource (url: "+e+")",3),b(document.createElement("link"),{rel:"stylesheet",
type:"text/css",href:e},f,e,g,h))},html:function(b,f,g,h){c(b,f)||(a.isObject(g)||(g={}),g.type="raw",!0===a.environment.get("debug")&&(g.cache=!1),a.isObject(g.header)||(g.header={}),g.header.accept="text/html",e(b,f,g,h))},javafx:function(b,e,f,g){if(a.isNull(f)||a.isNull(f.code)||a.isNull(f.id))a.console.warn("a.loader.javafx : the system need args.code and args.name setted to be able to load any javafx resource... This uri will not be loaded : "+b,3);else if(!c(b,e)){this.js("http://dl.javafx.com/"+
(f.version?f.version:"1.3")+"/dtfx.js",function(){javafx({archive:b,width:f.width||1,height:f.height||1,code:f.code,name:f.id})});var h=null,t=2E3,h=a.timer.add(function(){0<t--&&!a.isNull(document.getElementById(f.id).Packages)?(a.timer.remove(h),a.isFunction(e)&&e()):0>=t&&a.isFunction(g)&&g(b,408)},null,200)}},flash:function(b,e,f,g){a.isNull(f)||a.isNull(f.rootId)||a.isNull(f.id)?a.console.warn("a.loader.flash : the system need args parameters : rootId, id, setted to be able to load any flash resource... This uri will not be loaded : "+
b,3):c(b,e)||this.js(a.url+"vendor/storage/flash/swfobject.js",function(){swfobject.embedSWF(b,f.rootId,"100%","100%","10.0.0",a.url+"vendor/storage/flash/expressInstall.swf",f.flashvars,f.params,{id:f.id},function(c){!1===c.success&&a.isFunction(g)?g(b,408):!0===c.success&&a.isFunction(e)&&setTimeout(e,500)})})},silverlight:function(b,e,f,g){if(a.isNull(f)||a.isNull(f.rootId)||a.isNull(f.id))a.console.warn("a.loader.silverlight : the system need args parameters : rootId, id, setted to be able to load any silverlight resource... This uri will not be loaded : "+
b,3);else if(!c(b,e)){a.console.log("a.loader: load resource (url: "+b+")",3);var h=document.createElement("object");h.id=f.id;h.data="data:application/x-silverlight-2,";h.type="application/x-silverlight-2";a.isArray(f.params)||(f.params=[]);f.params.push({name:"source",value:b});for(var t=0,w=f.params.length;t<w;++t){var u=document.createElement("param");u.name=f.params[t].name;u.value=f.params[t].value;h.appendChild(u)}document.getElementById(f.rootId).appendChild(h);var x=null,d=2E3,x=a.timer.add(function(){0<
d--&&!a.isNull(document.getElementById(f.id).Content)?(a.timer.remove(x),e()):0>=d&&a.isFunction(g)&&g(b,408)},null,200)}},trace:function(){return f}}}();a.eventEmitter=function(){function c(c){for(var f in b.__list)1>b.__list[f].length&&delete b.__list[f]}var b=function(){this.__list={};this.__base="a.message"};b.prototype.setName=function(b){this.__base=""+b};b.prototype.addListener=function(b,c){a.isFunction(c)?(a.isNull(this.__list[b])&&(this.__list[b]=[]),this.__list[b].push(c),this.dispatch(this.__base+".add",{type:b,fct:c})):a.console.warn(this.__base+".addListener : unable to bind function, this is not a function",1)};b.prototype.add=b.prototype.on=
b.prototype.bind=b.prototype.addListener;b.prototype.addListenerOnce=function(b,c){var g=this,h=function(n){c(n);g.removeListener(b,h)};this.addListener(b,h)};b.prototype.once=b.prototype.onOnce=b.prototype.bindOnce=b.prototype.addListenerOnce;b.prototype.removeListener=function(b,f){if(!a.isNull(this.__list[b])){var g=this.__list[b].length;if(a.isFunction(f))for(;g--;)this.__list[b][g]===f&&this.__list[b].splice(g,1);this.dispatch(this.__base+".remove",{type:b,fct:f});c(b)}};b.prototype.remove=b.prototype.off=
b.prototype.unbind=b.prototype.removeListener;b.prototype.removeAllListeners=function(b){a.isNull(this.__list[b])||(this.__list[b]=[],c(b))};b.prototype.removeAll=b.prototype.offAll=b.prototype.unbindAll=b.prototype.removeAllListeners;b.prototype.clear=function(){var b=this.__base+".clear",c;for(c in this.__list)c!==b&&delete this.__list[c];this.dispatch(b,{})};b.prototype.dispatch=function(b,c){var g=this.__list[b];if(!a.isNull(g))for(var h=0,n=g.length;h<n;++h)(function(b){setTimeout(function(){b(c)},
0)})(g[h])};return b}();a.message=new a.eventEmitter;a.message.setName=function(){};a.parser={json:{stringify:function(c){try{return JSON.stringify(c)}catch(b){return a.console.error("a.parser.json.stringify: unable to stringify (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),""}},parse:function(c){try{return JSON.parse(c)}catch(b){return a.console.error("a.parser.json.parse: unable to parse (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),null}}},xml:{stringify:function(c){if(!a.isNull(c)&&!a.isNull(c.xml))return c.xml;
if(!a.isNull(window.XMLSerializer))try{return(new window.XMLSerializer).serializeToString(c)}catch(b){a.console.error("a.parser.xml.stringify: unable to stringify (value: "+c+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1)}finally{return""}a.console.error("a.parser.xml.stringify: unable to find any parser available",1);return""},parse:function(c){if(!a.isNull(window.ActiveXObject)){for(var b=null,e=0;4>e;++e)try{b=new ActiveXObject(("MSXML2.DOMDocument."+(6-e)+".0")[e])}catch(f){}b.async=
!1;b.loadXML(c);return 0!=b.parseError.errorCode?(a.console.error("a.parser.xml.parse: unable to parse (value: "+c+", reason"+b.parseError.reason+")",1),a.environment.get("debug")&&a.console.error(a.getStackTrace(),1),null):b}if(!a.isNull(window.DOMParser))return(new DOMParser).parseFromString(c,"text/xml");a.console.error("a.parser.xml.parse: unable to find any parser available",1);return null}}};a.timer=function(){var c={};setInterval(function(){a.message.dispatch("a.timer.tick",{});for(var b in c){var e=c[b];e.current+=50;e.current>=e.timeout&&(e.current=0,a.isFunction(e.fct)&&e.fct.call(e.scope||this))}},50);return{add:function(b,e,f){var g;for(g=Math.floor(1E6*Math.random());!a.isNull(c[g]);)g=Math.floor(1E6*Math.random());if(!a.isNumber(f)||0>=f)f=1E3,a.console.error("The timeout has not been setted properly into timer, timeout has been setted to 1000ms",1);c[g]={fct:b,scope:e,timeout:f,
current:0};return g},once:function(b,c,f){var g=this.add(function(){a.isFunction(b)&&b.call(this);a.timer.remove(g)},c,f);return g},get:function(b){b=c[b];return a.isNull(b)?null:b},remove:function(b){return delete c[b]},clear:function(){c={}}}}();a.callback={};
a.callback.synchronizer=function(){function c(){p--;0>=p&&!1===t?(s=!1,u.prototype.dispatch("a.callback.synchronizer.success",{}),m(w)):0>=p&&(s=t=!1)}function b(){!0===s&&(t=!0,s=!1,u.prototype.dispatch("a.callback.synchronizer.error",{}),v.apply(this,arguments))}function e(b,c){w[b]=c}function f(b){a.isObject(b)&&(w=b)}function g(b){return a.isNull(w[b])?null:w[b]}function h(){return w}var n=[],p=0,m=function(){return!0},v=function(){return!0},s=!1,t=!1,w={},u=function(){};u.prototype=new a.eventEmitter;
u.prototype.constructor=this;u.prototype.setSuccess=function(b){m=a.isFunction(b)?b:m};u.prototype.setDone=u.prototype.setSuccess;u.prototype.setFail=function(b){v=a.isFunction(b)?b:v};u.prototype.setError=u.prototype.setFail;u.prototype.addCallback=function(){for(var d=[],d=!a.isNull(arguments[0])&&a.isArray(arguments[0])?arguments[0]:arguments,l=0,y=d.length;l<y;++l){var k=d[l];a.isFunction(k)&&(p++,n.push(k),!0===s&&k({success:c,done:c,getData:g,getFullData:h,setData:e,setFullData:f,fail:b,error:b}))}!0===
s&&a.console.warn("a.callback.synchronizer.addCallback : you should not add/remove callback when synchronizer is running",1)};u.prototype.removeCallback=function(b){for(var c=n.length-1;0<=c;--c)n[c]===b&&(!0===s&&a.console.warn("a.callback.synchronizer.removeCallback : you should not add/remove callback when synchronizer is running",1),p--,n.splice(c,1))};u.prototype.start=function(d,l){if(0>=p)c();else{s=!0;w={};for(var y=0,k=n.length;y<k;++y)n[y]({success:c,done:c,getData:g,getFullData:h,setData:e,
setFullData:f,fail:b,error:b},l);a.isNumber(d)&&0<d?setTimeout(function(){var c=parseInt(d,10);u.prototype.dispatch("a.callback.synchronizer.error",{timeout:c});b({timeout:c})},d):u.prototype.dispatch("a.callback.synchronizer.start",{timeout:-1})}};u.prototype.isRunning=function(){return s};var x=new u;x.setName("a.callback.synchronizer");return x};
a.callback.chainer=function(){function c(){0==v.length?(v=[],p(s),t.prototype.dispatch("a.callback.chainer.success",{})):t.prototype.start(arguments)}function b(){v=[];m.apply(this,arguments);t.prototype.dispatch("a.callback.chainer.error",{})}function e(b,c){s[b]=c}function f(b){a.isObject(b)&&(s=b)}function g(b){return a.isNull(s[b])?null:s[b]}function h(){return s}var n=[],p=function(){return!0},m=function(){return!0},v=[],s={},t=function(){};t.prototype=new a.eventEmitter;t.prototype.constructor=
this;t.prototype.setSuccess=function(b){p=a.isFunction(b)?b:p};t.prototype.setDone=t.prototype.setSuccess;t.prototype.setFail=function(b){m=a.isFunction(b)?b:m};t.prototype.setError=t.prototype.setFail;t.prototype.addCallback=function(){for(var b=[],b=!a.isNull(arguments[0])&&a.isArray(arguments[0])?arguments[0]:arguments,c=0,d=b.length;c<d;++c){var e=b[c];a.isFunction(e)&&(n.push(e),!0===t.prototype.isRunning()&&v.push(e))}!0===t.prototype.isRunning()&&a.console.warn("a.synchronizer.addCallback : you should not add/remove callback when synchronizer is running",
1)};t.prototype.removeCallback=function(b){for(var c=n.length-1;0<=c;--c)if(n[c]===b){if(!0===t.prototype.isRunning()){for(var d=v.length-1;0<=d;--d)v[d]===b&&v.splice(d,1);a.console.warn("a.synchronizer.removeCallback : you should not add/remove callback when synchronizer is running",1)}n.splice(c,1)}};t.prototype.start=function(){if(0==v.length){for(var m=0,p=n.length;m<p;++m)v.push(n[m]);t.prototype.dispatch("a.callback.chainer.start",{});s={};0==v.length&&c()}m=v.shift();a.isFunction(m)&&m({success:c,
done:c,getData:g,getFullData:h,setData:e,setFullData:f,fail:b,error:b},arguments)};t.prototype.isRunning=function(){return 0==v.length?!1:!0};var w=new t;w.setName("a.callback.chainer");return w};a.form=function(){function c(b,c){return a.isNull(b.getAttribute)?null:b.getAttribute(c)}function b(b){for(var c=[],e=b.length;e--;)c.push(b[e]);return c}function e(b){var e=c(b,"name");if(a.isNull(e)||""===e)if(e=c(b,"id"),a.isNull(e)||""===e)e=c(b,"class");return e}function f(e){var f=e.getElementsByTagName("input"),g=e.getElementsByTagName("textarea");e=e.getElementsByTagName("select");for(var f=b(f),h=f.length;h--;){var n=c(f[h],"type");a.contains(m,n)||a.isNull(n)||f.splice(h,1)}return f.concat(b(g),
b(e))}function g(b,e,f,g){var h="";a.isNull(f)||""===f||(h=c(b,"data-error-"+f));if(a.isNull(h)||""===h)h=c(b,"data-error");(a.isNull(h)||""===h)&&a.console.warn("A data-error tag has not been setted for "+e+" with value "+g+", can't proceed error show",3);a.isNull(a.language)||(h=a.language.getSingleTranslation(h,{name:f,value:g}));return{el:b,id:e,error:h}}var h="text search url tel email password".split(" "),n="number range date datetime datetime-local month time week".split(" "),p=h.concat(n,
["number","checkbox","radio","file"]),m=n.concat(h,["color","checkbox","file","hidden","radio"]);return{skipNoValidate:!1,get:function(b){b=f(b);for(var g={},h=b.length;h--;){var m=b[h],n=e(m),p;p=m;var d=c(p,"type"),l=p.tagName.toLowerCase();p="input"===l||"textarea"===l?"checkbox"===d?p.checked:p.value:"select"===l?p.options[p.selectedIndex].value:void 0;null!==n&&""!==n&&(a.isNull(m)||"radio"!==c(m,"type")?g[n]=""===p?null:p:m.checked&&(g[n]=""===p?null:p))}a.console.log("a.form.get: found element list:",
3);a.console.log(g,3);return g},validate:function(b){if(!a.isNull(c(b,"novalidate"))&&!1===this.skipNoValidate)return[];b=f(b);for(var m=[],t="number range text search url email password color checkbox hidden radio".split(" "),w=RegExp("^[a-z]{2,}:\\/\\/([a-z0-9\\/\\.\\-_~+;:&=]{2,})$","gi"),u=RegExp("^.{2,}@.*\\.[a-z0-9]{2,}$","gi"),x=RegExp("^#([a-f]{3}|[a-f]{6})$","gi"),d=b.length;d--;){var l=b[d],y=l.tagName.toLowerCase();if("select"!==y&&a.isNull(c(l,"formnovalidate"))){var k=c(l,"type"),q=e(l),
r=l.value,z=c(l,"required"),A=c(l,"pattern");c(l,"multiple");var B=c(l,"min"),E=c(l,"max"),C=c(l,"step"),B=a.isNull(B)||""===B?null:parseFloat(B),E=a.isNull(E)||""===E?null:parseFloat(E),C=a.isNull(C)||""===C?null:parseFloat(C);"input"!==y||a.contains(t,k)||a.isNull(k)?"number"!==k&&"range"!==k||a.isNumber(r)?"url"!==k||w.test(r)?"email"!==k||u.test(r)?"color"!==k||x.test(r)?null!==z&&a.contains(p,k)&&(""===r||a.isNull(r))?m.push(g(l,q,"required",r)):null===A||"textarea"!==y&&!a.contains(h,k)&&!a.isNull(k)||
RegExp(A).test(r)?null===B&&null==E&&null==C||!a.contains(n,k)||(y=parseFloat(r),null!==B&&y<B?m.push(g(l,q,"min",r)):null!==E&&y>E?m.push(g(l,q,"max",r)):null!==C&&0!==y%C&&m.push(g(l,q,"step",r))):m.push(g(l,q,"pattern",r)):m.push(g(l,q,null,r)):m.push(g(l,q,null,r)):m.push(g(l,q,null,r)):m.push(g(l,q,null,r)):a.console.warn("Type "+k+" for input "+q+" not recognized or not supported",3)}}a.console.log("a.form.validate: found error list:",3);a.console.log(m,3);return m},validateAndGet:function(b){b=
{errorList:this.validate(b),error:!1,contentList:this.get(b)};0<b.errorList.length&&(b.error=!0);return b}}}();a.keyboard=function(c){return a.isNull(c)?(a.console.error("a.keyboard.global: error, Mousetrap is undefined, the plugin a.keyboard will not work",1),{addListener:function(){},removeListener:function(){},reset:function(){},clear:function(){}}):{addListener:function(b,e){a.console.log("a.keyboard.addListener: bind key: "+b,3);c.bind(b,e)},removeListener:function(b){a.console.log("a.keyboard.removeLister: remove listener on key: "+b,3);c.unbind(b)},reset:function(){a.console.log("a.keyboard.reset: clear all keys",
3);c.reset()},clear:function(){a.console.log("a.keyboard.clear: clear all keys",3);c.reset()}}}(window.Mousetrap);a.language=function(){function c(b,c){if(a.isNull(p[b]))return null;var e=p[b][c];if(a.isNull(e))a.console.info("a.language.__getRawTranslate: unable to find hash in dictionnary (value: "+c+", language: "+b+")",3);else return e;return null}function b(b){b=""+b;0>b.indexOf("{{")&&(b="{{"+b+"}}");b=b.replace("{{","\\{\\{");return b=b.replace("}}","\\}\\}")}function e(d,e){var f=c(h,d);if(!a.isNull(f)){var k=f;if(a.isArray(e))for(var g=0,m=e.length;g<m;++g)var n=b(g+1),n=RegExp(n,"gi"),k=k.replace(n,
e[g]);else for(g in e)n=b(g),n=RegExp(n,"gi"),k=k.replace(n,e[g]);if(0<=k.indexOf("{{")&&0<=k.indexOf("}}"))for(f=f.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],g=0,m=f.length;g<m;++g){var n=b(f[g]),p=f[g].replace("{{","").replace("}}",""),p=a.isNull(t[p])?null:t[p];a.isNull(p)||(n=RegExp(n,"gi"),k=k.replace(n,p))}return k=k.replace(/\{\{[a-z\-_0-9]+\}\}/gi,"")}return d}function f(b,c){a.isString(c)||(c=v);try{return b.getAttribute(c)}catch(e){return null}}function g(b){a.isNull(b)&&(b=document);var l=[];
a.isNull(f(b))||l.push(b);var g=[];b.querySelectorAll?(g=b.querySelectorAll("*["+v+"]"),0===g.length&&(g=b.querySelectorAll("*"))):g=b.getElementsByTagName("*");b=0;for(var k=g.length;b<k;++b)a.isNull(f(g[b]))||l.push(g[b]);g=0;for(b=l.length;g<b;++g){var q=l[g],k=f(q);if(!a.isNull(k)){var r=c(h,k),n={};a.isNull(r)&&(r=k);for(var r=r.match(/\{\{[a-z0-9\-_]+\}\}/gi)||[],p=0,w=r.length;p<w;++p){var u=r[p].replace("{{","").replace("}}",""),x=f(q,v+"-"+u);a.isNull(x)?(x="undefined"===t[u]?null:t[u],a.isNull(x)||
(n[u]=x)):n[u]=x}r=e(k,n);k=f(q,s);if(!a.isNull(k))try{q[k]=r}catch(G){}else if(q)if("INPUT"!==q.nodeName||"submit"!==q.type&&"reset"!==q.type)if("INPUT"===q.nodeName)try{q.placeholder=r}catch(J){}else if("FIELDSET"===q.nodeName)q.title=r;else if(!a.isNull(q.text)&&document.all)q.text=r;else if(a.isNull(q.childNodes))q.innerHTML=r;else if(k=q.childNodes.length,n=document.createTextNode(r),"leave"===m){for(r=!1;k--;)p=q.childNodes[k],3===p.nodeType&&(r||(q.insertBefore(n,p),r=!0),q.removeChild(p));
r||q.appendChild(n)}else{for(;k--;)q.removeChild(q.firstChild);q.appendChild(n)}else q.value=r}}}var h="en",n=["en","fr","de","sp"],p={},m="leave",v="data-tr",s="data-tr-attr",t={},w=!a.isNull(a.storage)&&!0===a.storage.persistent.support;if(w){var u=a.storage.persistent.getItem("a_language_store_language"),x=a.storage.persistent.getItem("a_language_store_allowed");a.isString(u)&&(h=u,g(document));a.isArray(x)&&(n=x)}return{setBehavior:function(b){m="erase"===b?"erase":"leave"},getBehavior:function(){return m},
getCurrent:function(){return h},setCurrent:function(b,c){!a.isString(b)||0>=b.length?a.console.error("a.language.setCurrent: setting a non-string lang, or empty string, as default language: "+b,1):(a.isNull(c)&&(c=!0),a.contains(n,b)||a.console.warn("a.language.setCurrent: unable to find language in available language list (value: "+b+", available: "+n.join(";")+")",2),h=b,a.isNull(p[h])&&(p[h]={}),a.console.log("a.language.setCurrent: set current language to "+h+", request update ? "+c,3),a.message.dispatch("a.language.change",
{value:h}),w&&a.storage.persistent.setItem("a_language_store_language",h),this.translate(document,c))},getAllowed:function(){return n},setAllowed:function(b){a.isString(b)&&(b=[b]);if(a.isArray(b)){n=b;var c=0;for(b=b.length;c<b;++c)a.isNull(p[c])&&(p[c]={});w&&(a.console.log("a.language.setAllowed: set allowed language to "+n,3),a.storage.persistent.setItem("a_language_store_allowed",n))}else a.console.error("a.language.setAllowed: the allowed language must be an Array (value: "+b+")",1)},getSingleTranslation:function(b,
c){return e(b,c)},addSingleTranslation:function(b,c,e,f){a.isNull(p[b])&&(a.console.warn("a.language.addSingleTranslation: be carefull, the language you submit does not seems to exist in dict (value: "+b+", dict: "+n.join(";")+")",1),p[b]={});p[b][c]=e;this.translate(document,f)},addTranslation:function(b,c,e){a.isNull(p[b])&&(p[b]={});for(var f in c)p[b][f]=c[f];this.translate(document,e)},getTranslation:function(b){return a.isString(b)?p[b]:p},translate:function(b,c){!1!==c&&g(b)},addVariable:function(b,
c){a.console.log("a.language.addVariable: add global variable (key: "+b+", value: "+c+")",3);t[b]=c},getVariable:function(b){return"undefined"===t[b]?null:t[b]},removeVariable:function(b){a.console.log("a.language.removeVariable: remove global variable (key: "+b+")",3);delete t[b]},clear:function(){p={}}}}();a.page={};
a.page.template={__tmpl:{},get:function(c,b,e,f){var g=null;a.isObject(window.Mustache)?g=window.Mustache:a.isObject(window.Handlebars)&&(g=window.Handlebars);if(null==g)a.console.error("a.page.template.get: unable to find Mustache.JS or Handlebars.JS ! Can't proceed",1);else{var h=c.replace(/[^a-zA-Z0-9\\-]/g,"_"),n="a_tmpl_"+h+"_a",p=function(b,c,e){a.isFunction(b)&&(a.isNull(g.to_html)?(c=g.compile(a.page.template.__tmpl[c]),b(c(e))):b(g.to_html(a.page.template.__tmpl[c],e)))};a.isString(this.__tmpl[n])?(a.console.log("a.page.template.get: loading "+
n+" from cache",3),p(e,n,b)):document.getElementById(n)?(this.__tmpl[n]||(a.console.log("a.page.template.get: loading "+n+" from inner html page",3),this.__tmpl[n]=document.getElementById(n).innerHTML),p(e,n,b)):document.getElementById(h)?(this.__tmpl[h]||(a.console.log("a.page.template.get: loading "+h+" from inner html page",3),this.__tmpl[h]=document.getElementById(h).innerHTML),p(e,h,b)):(a.console.log("a.page.template.get: loading "+c+" from external resource",3),a.loader.html(c,function(c,f,
g){a.page.template.__tmpl[n]||(a.page.template.__tmpl[n]=c);p(e,n,b)},{},f))}},htmlToDom:function(c){var b=document.createElement("div");b.innerHTML=c.replace(/^\s+|\s+$/g,"");c=b.childNodes;for(var b=[],e=0,f=c.length;e<f;++e){var g=c.item(e);!a.isObject(g)||"1"!==g.nodeType.toString()&&"3"!==g.nodeType.toString()||b.push(g)}return b},remove:function(c,b){for(;c.firstChild;)c.removeChild(c.firstChild);a.isFunction(b)&&b()},append:function(c,b,e){var f=this.htmlToDom(b);if(a.isObject(f))for(var g=
0,h=f.length;g<h;++g)c.appendChild(f[g]);a.isNull(a.language)||a.language.translate(c);a.isFunction(e)&&e(b)},replace:function(c,b,e){this.remove(c);this.append(c,b,e)}};
a.page.event=function(){function c(b,c){a.isObject(c)||(c={});return function(){a.message.dispatch("a.page.event."+b,c)}}function b(){var b=(new Date).getTime();b>n+2*h&&(a.console.log("a.page.event.hibernate: hibernate mode has been detected",3),c("hibernate")());n=b}function e(b,c){window.addEventListener?window.addEventListener(b,c,!1):window.attachEvent&&window.attachEvent("on"+b,c)}function f(b){var e=window.location.hash?window.location.hash.substring(1):null;if(p!==e){if(!0!==b){for(m.push({hash:e,
time:(new Date).getTime()});1E3<m.length;)m.shift();a.console.log("a.page.event.hash: hash change (previous: "+p+", new: "+e+")",3);c("hash",{value:e,old:p})()}p=e}}var g={},h=1E4,n=(new Date).getTime(),p=null,m=[];g.hash={getHash:function(){return window.location.hash?window.location.hash.substring(1):null},getPreviousHash:function(){return p},setPreviousHash:function(b){a.console.log("a.page.event.hash.setPreviousHash: change previous hash to "+b,3);p=b},trace:function(){return m}};f(!0);!a.isNull(window.onhashchange)&&
(void 0===document.documentMode||7<document.documentMode)?window.onhashchange=f:a.timer.add(f,null,50);var v=["resize","load","unload"],s;for(s in v)e(v[s],c(v[s]));e("load",function(){a.timer.add(b,null,h)});return g}();a.state=function(){function c(b){return a.isArray(b)?b.reverse():a.isString(b)?[b]:[]}function b(){for(var b=x;x===b||0>=x;)x=Math.floor(1E5*Math.random());return x}function e(b,c){var d=[],e=b.length;c=a.isFunction(c)?c:function(){return!0};for(var f=0;f<e;++f){for(var g=!1,h=0;h<e;++h)if(f!=h&&b[f].id===b[h].id&&c(b[f])){g=!0;break}g||d.push(b[f].id)}return d}function f(b){for(var c=0,d=[],e=a.state.helper.tree.selectLevel(b,m,c);0<e.length;)d.push(e),c++,e=a.state.helper.tree.selectLevel(b,m,c);
return d}function g(b){b=h(b);for(var c=u.length,d=[];c--;){for(var e=u[c].hashtagList,f=e.length,g=!1;f--&&(g=b({hash:e[f]}),!0!==g););g||(d=d.concat(u[c].itemList.slice()),u.splice(c,1))}return d}function h(b){return function(c){if(a.isObject(c)&&0<c.hash.length){if(c.hash===b)return!0;if(0<=c.hash.indexOf("{{")&&0<=c.hash.indexOf("}}")){var d=a.state.helper.parameter.extract(c.hash);c=c.hash;for(var e=d.length;e--;)c=a.state.helper.parameter.replace(c,d[e]);return RegExp("^"+c+"$","gi").test(b)}}return!1}}
function n(b){return function(c){return a.isObject(c)&&(a.isArray(b)&&a.contains(b,c.id)||c.id===b)?!0:!1}}function p(b,c){var d=n(c),e=h(b);return function(b){return!0===d(b)||!0===e(b)?!0:!1}}function m(b){return a.isObject(b)&&a.isArray(b.children)?b.children:[]}function v(b){return a.isObject(b)?b.id:-1}function s(b){return a.isObject(b)&&a.isObject(b.error)?b.error:null}function t(c){var d=a.clone(w),k=a.clone(w),q=a.clone(w),r=g(c.value),n=h(c.old),r=p(c.old,r),s=h(c.value);a.state.helper.tree.selectBranch(d,
m,r);a.state.helper.tree.selectBranch(k,m,s);a.state.helper.tree.selectBranch(q,m,h("*"));var r=a.state.helper.tree.flat(d.concat(k),m),t=e(r,function(b){return 0<=b.hash.indexOf("{{")&&0<=b.hash.indexOf("}}")&&!a.state.helper.tree.isInBranch(b,m,s)&&!a.state.helper.tree.isInBranch(b,m,n)?!1:!0}),u=a.state.helper.tree.flat(q,m,v),d=f(d),x=f(k);a.message.dispatch("a.state.begin",c);a.console.log("a.state: element allowed to proceed change: "+t+" (does not mean all of them will be loaded)",3);var G=
b();a.state.helper.chainer("unload",d,t,-1,function(){a.state.helper.chainer("load",x,t,G,function(){0<q.length?(q=[q],a.console.log("a.state: wildcard allowed to proceed change: "+u+" (does not mean all of them will be loaded)",3),a.state.helper.chainer("unload",q,u,-1,function(){a.state.helper.chainer("load",q,u,-1,function(){a.message.dispatch("a.state.end",c)})})):a.message.dispatch("a.state.end",c)})})}var w=[],u=[],x=-1,d=[];a.message.addListener("a.page.event.hash",t);a.message.addListener("a.message.clear",
function(){a.message.addListener("a.page.event.hash",t)});return{clear:function(){w=[]},tree:function(){return a.clone(w)},add:function(b,d){if(!a.isObject(b))return null;if(a.isArray(b))for(var e=0,f=b.length;e<f;++e)this.add(b[e]);else{b.hash=a.isString(b.hash)?b.hash:"";a.isObject(b.include)||(b.include={});b.include.css=c(b.include.css);b.include.js=c(b.include.js);b.include.translate=c(b.include.translate);b.include.html=a.isString(b.include.html)?b.include.html:null;for(var g=["preLoad","postLoad",
"preUnload","unload","postUnload"],h=0,e=g.length;h<e;++h)f=b[g[h]],a.isFunction(f)&&(f=f.toString(),f=f.slice(f.indexOf("(")+1,f.indexOf(")")).match(/([^\s,]+)/g),a.isNull(f)&&a.console.warn("The result parameter for function '"+g[h]+"' in id '"+b.id+"' has not been found, the state may not work properly",2));!a.isArray(b.children)&&a.isObject(b.children)&&(b.children=[a.clone(b.children)]);h=!a.isNull(b.parent);e=a.isArray(b.children);"*"===b.hash&&(h&&a.console.warn("a.state.add : The wildcard has a parent setted (not allowed)",
1),e&&a.console.warn("a.state.add : The wildcard has children (not allowed)",1),b.parent=null,h=!1,b.children=[]);g=[];e&&(g=b.children.slice());b.children=[];a.isNull(b.id)&&(b.id=1);for(;!a.isNull(a.state.helper.tree.getItem(w,m,n(b.id)));)b.id=Math.floor(1E5*Math.random()+1);if(h){h=a.state.helper.tree.getItem(w,m,n(b.parent));if(a.isNull(h))return null;h.children.push(b)}else w.push(b);h=b.id;e=0;for(f=g.length;e<f;++e)a.isObject(g[e])&&(g[e].parent=h,this.add(g[e]));"*"===b.hash&&a.state.helper.chainer("load",
[[b]],[h],-1,function(){});!0===b.bootOnLoad&&(g=a.clone(b),g.data=g.converter=g.options=null,g.preLoad=g.load=g.postLoad=null,g.preUnload=g.unload=g.postUnload=null,d=a.isFunction(d)?d:function(){},a.state.helper.chainer("load",[[g]],[h],-1,d));return h}},getById:function(b){return a.state.helper.tree.getItem(w,m,n(b))},removeById:function(b){var c=a.state.helper.tree.getItem(w,m,n(b));a.console.log("a.state.removeById: remove element (id: "+b+")",3);a.state.helper.tree.selectBranch(w,m,function(b){return b===
c?!1:!0})},loadById:function(b,d,g){var q=a.clone(w),r=a.page.event.hash.getHash(),p=a.clone(w);a.state.helper.tree.selectBranch(q,m,n(b));a.state.helper.tree.selectBranch(p,m,h(r));var s=a.state.helper.tree.flat(q,m),p=a.state.helper.tree.flat(p,m),p=e(p.concat(s)),q=f(q);g=a.isFunction(g)?g:function(){};a.console.log("a.state.loadById: element allowed to proceed change: "+p+" (does not mean all of them will be loaded)",3);a.state.helper.chainer("load",q,p,-1,g);a.isNull(d)&&(d=r);b={id:b,itemList:a.state.helper.tree.flat(s,
m,v),hashtagList:c(d)};u.push(b)},unloadById:function(b,c){for(var d=this.getById(b),d=f([d]),e=[],g=u.length;g--;)e=e.concat(u[g].itemList);a.console.log("a.state.unloadById: element allowed to proceed change: "+e+" (does not mean all of them will be unloaded)",3);g=a.isFunction(c)?c:function(){};a.state.helper.chainer("unload",d,e,-1,g)},forceReloadById:function(c,d){for(var e=a.isFunction(d)?d:function(){},g=u.length,n=[],p=a.clone(u);g--;)a.contains(u[g].itemList,c)&&n.push(u[g].hashtagList);
if(0<n.length)this.unloadById(c,function(){for(var b=n.length;b--;)a.state.loadById(c,n[b]);u=p;e()});else{var g=a.clone(w),s=a.page.event.hash.getHash();a.state.helper.tree.selectBranch(g,m,h(s));for(var s=a.state.helper.tree.flat(g,m),t=s.length;t--;)if(s[t].id===c){var x=f([s[t]]),C=a.state.helper.tree.flat(g,m,v);a.console.log("a.state.forceReloadById: element allowed to proceed change: "+C+" (does not mean all of them will be loaded/unloaded)",3);var G=b();a.state.helper.chainer("unload",x,C,
-1,function(){a.state.helper.chainer("load",x,C,G,e)});break}}},hashExists:function(b){return a.isString(b)&&""!==b?a.state.helper.tree.isInBranch(w,m,h(b)):!1},__currentGeneratedId:function(){return x},__getError:function(b,c){var d=b.id;c="_"+c;var e=a.clone(w);a.state.helper.tree.selectBranch(e,m,n(d));for(var d=a.state.helper.tree.flat(e,m,s),e=[c,c.substring(0,c.length-1)+"x",c.substring(0,c.length-2)+"xx","generic","_generic"],f=0,g=e.length;f<g;++f){var h;a:{h=e[f];for(var p=d.length;p--;){var t=
d[p];if(!a.isNull(t))for(var u in t)if(u==h){h=t[u];break a}}h=null}if(!a.isNull(h))return h}return null},type:{add:function(b,c){d[b]=c},get:function(b){return a.isFunction(d[b])?d[b]:null},list:function(){return d}},helper:{tree:{},chainer:{},parameter:{}}}}();
a.state.helper.tree={flat:function(c,b,e){var f=[];if(!a.isArray(c)||!a.isFunction(b))return[];e=a.isFunction(e)?e:function(b){return b};for(var g=0,h=c.length;g<h;++g){var n=this.flat(b(c[g]),b,e);f.push(e(c[g]));0<n.length&&(f=f.concat(n))}return f},getItem:function(c,b,e){if(!a.isArray(c)||!a.isFunction(e)||!a.isFunction(b))return null;for(var f=0,g=c.length;f<g;++f){if(!0===e(c[f]))return c[f];var h=this.getItem(b(c[f]),b,e);if(!a.isNull(h))return h}return null},isInBranch:function(c,b,e){c=this.getItem(c,
b,e);return a.isNull(c)?!1:!0},selectBranch:function(c,b,e){if(a.isArray(c)&&a.isFunction(b)&&a.isFunction(e))for(var f=c.length;f--;){var g=b(c[f]);!1===e(c[f])&&a.isNull(this.getItem(g,b,e))?c.splice(f,1):0<g.length&&this.selectBranch(g,b,e)}},selectLevel:function(c,b,e){if(!a.isArray(c)||!a.isFunction(b))return[];var f=[],g=c.length;if(a.isNull(e)||isNaN(e)||0>=e)return c;for(e--;g--;){var h=b(c[g]);0<h.length&&(f=f.concat(this.selectLevel(h,b,e)))}return f}};
a.state.helper.chainer=function(c,b,e,f,g){function h(b,c){var d={};a.isNull(b)||(d.resource=b);a.isNull(c)||(d.status=c);var e=a.state.__getError(x,c);a.message.dispatch("a.state.error",d);a.isNull(e)||(a.isString(e)?window.location.href="#"+e:a.isFunction(e)?e(x.id,b,c):a.console.error("a.state.helper.chainer.__error: error resolver cannot determine action to perform, please check your different error handler (status: "+c+", state id: "+x.id+")"))}function n(b){return function(c){w(b,function(){c.done()})}}
function p(b,c,d){return function(e){a.loader[b](c,function(b){a.isFunction(d)&&d(b);e.done()})}}function m(b,c,d){if(a.isObject(d))for(var e in d)d[e]=a.state.helper.parameter.extrapolate(d[e],b,c),m(b,c,d[e])}function v(b,c,d,e){var f=a.clone(d);d=a.page.event.hash.getHash();f.url=a.state.helper.parameter.extrapolate(c,d,e);m(d,e,f);c=c.replace(/^\s+|\s+$/g,"");return 0===c.indexOf("{{")&&c.indexOf("}}")===c.length-2?(c=a.state.helper.parameter.extrapolate(c,d,e,!1),function(d){var e=d.getData("data")||
{};a.isObject(e.a)||(e.a=e.appstorm={},e.a.parameter=e.appstorm.parameter={});a.isNull(b)?e=c:(e.a.parameter[b]=c,e.appstorm.parameter=e.a.parameter,a.isNull(e[b])&&(e[b]=c));d.setData("data",e);d.done()}):function(c){a.isNull(c.getData("data"))&&c.setData("data",{});(new a.ajax(f,function(d){if(a.isNull(b))c.setData("data",d);else{var e=c.getData("data");e[b]=d;c.setData("data",e)}c.done()},h)).send()}}function s(b,c){for(var d=new a.callback.synchronizer,e=b.include.css,f=b.include.js,g=b.include.html,
l=b.include.translate,m=b.data,n=b.title,s=b.options,t=b.converter,u=b.hash,w=e.length,x=f.length;w--;)d.addCallback(p("css",e[w]));for(;x--;)d.addCallback(p("js",f[x]));if(!a.isNull(a.language)&&0<l.length)for(e=l.length;e--;)d.addCallback(p("json",l[e],function(b){for(var c in b)a.language.addTranslation(c,b[c],!0)}));a.isString(g)&&(g=a.state.helper.parameter.extrapolate(g,a.page.event.hash.getHash(),u),d.addCallback(function(b){b.setData("html",g);a.page.template.get(g,{},b.done,h)}));if(a.isString(m)||
a.isObject(m))if(a.isObject(s)||(s={type:"json"}),a.isString(s.type)||(s.type="json"),a.isString(m))d.addCallback(v(null,m,s,u));else for(var D in m)a.isObject(m[D])&&a.isString(m[D].url)?(a.isObject(m[D].options)||(m[D].options={type:"json"}),d.addCallback(v(D,m[D].url,m[D].options,u))):d.addCallback(v(D,m[D],s,u));else d.addCallback(function(b){b.setData("data",{});b.done()});d.setSuccess(function(b){a.isNull(t)||t(b.data);a.isNull(n)||(n=a.state.helper.parameter.extrapolate(n,a.page.event.hash.getHash(),
u),a.isNull(a.language)?document.title=n:document.title=a.language.getSingleTranslation(n));var d=b.data,e=b.html,d=a.isNull(d)?{}:d;a.isNull(e)?a.isFunction(c)&&c(b,null):a.page.template.get(e,d,function(d){a.isFunction(c)&&c(b,d)})});d.setFail(h);d.start()}function t(b,d){x=b;var e=new a.callback.chainer;"unload"===c?e.addCallback(b.preUnload,b.unload,b.postUnload):e.addCallback(function(c){a.isFunction(b.preLoad)&&(-1==f||0<=f&&a.state.__currentGeneratedId()===f)?b.preLoad(c):c.done()},function(c){s(b,
function(d,e){a.isFunction(b.load)&&(-1==f||0<=f&&a.state.__currentGeneratedId()===f)&&b.load(e);var g=c.getFullData()||{};if(a.isObject(d.data))for(var h in d.data)g[h]=d.data[h];c.setFullData(g);c.done()})},function(c){a.isFunction(b.postLoad)&&(-1==f||0<=f&&a.state.__currentGeneratedId()===f)?b.postLoad(c):c.done()},function(c){var d={id:b.id,value:b.id};a.message.dispatch("a.state.load",d);a.message.dispatch("a.state.load-"+b.id,d);c.done()});e.setSuccess(d);e.setFail(h);e.start()}function w(b,
c){for(var d=new a.callback.synchronizer,f=b.length;f--;)a.contains(e,b[f].id)&&function(b){d.addCallback(function(c){t(b,function(){c.done()})})}(b[f]);d.setSuccess(c);d.setFail(h);d.start()}var u=b.length,x=null;c="unload"===c?"unload":"load";e=e||[];var d=new a.callback.chainer;if("unload"===c)for(;u--;)d.addCallback(n(b[u]));else for(var l=0;l<u;)d.addCallback(n(b[l])),l++;d.setSuccess(g);d.setFail(h);d.start()};
a.state.helper.parameter={extract:function(c,b){var e=/\{\{(\s*\w+\s*:\s*[a-z0-9_\-\[\]\(\)\^.\|\+\*\?\\\/]+\s*)\}\}/gmi,f=/^\s+|\s+$/g,g=!a.isNull(b);g&&(e=b);for(var h=[],n;n=e.exec(c);){var p=null,p=g?["hash",n[1]]:n[1].split(":",2);h.push({original:n[0].replace(f,""),name:p[0].replace(f,""),regex:p[1].replace(f,""),start:n.index})}return h},replace:function(c,b,e){e=a.isNull(e)?"("+b.regex+")":e;return c.substr(0,b.start)+e+c.substr(b.start+b.original.length)},extrapolate:function(c,b,e,f){if(a.isString(c)&&
0<=c.indexOf("{{")&&0<=c.indexOf("}}")){for(var g=this.extract(c),h=this.extract(e),n=this.extract(c,/\{\{(\s*\w+\s*)\}\}/gmi),g=g.concat(n),n=h.length;n--;)e=this.replace(e,h[n]);if(n=RegExp("^"+e+"$","gi").exec(b)){b=0;for(e=h.length;b<e;++b)h[b].value=n[b+1];for(var n=0,p=g.length;n<p;++n)for(b=0;b<e;++b)h[b].name===g[n].regex&&"hash"===g[n].name&&(g[n].value=h[b].value)}h=g.length;for(f=!1===f?function(b,c,e){return e}:this.replace;h--;){b=g[h];"hash"!==b.name&&"hashtag"!==b.name||a.isNull(b.value)||
(c=this.replace(c,b,b.value));e=!1;if(!a.isNull(a.storage))switch(b.name){case "temporary":c=f(c,b,a.storage.temporary.getItem(b.regex));e=!0;break;case "memory":c=f(c,b,a.storage.memory.getItem(b.regex));e=!0;break;case "persistent":c=f(c,b,a.storage.persistent.getItem(b.regex));e=!0;break;case "cookie":c=f(c,b,a.storage.cookie.getItem(b.regex));e=!0;break;case "store":case "storage":e=a.storage.temporary.getItem(b.regex),c=a.isNull(e)?f(c,b,a.storage.persistent.getItem(b.regex)):f(c,b,e),e=!0}if(!e&&
(e=a.state.type.list(),a.isObject(e)))for(var m in e)m===b.name&&(n=e[m],c=a.isFunction(n)?f(c,b,n(b.regex)):f(c,b,n))}}return c}};a.storage={__printGetItem:function(c,b,e){"__test_support"!==b&&a.console.log("a.storage.type."+c+".getItem: get element (key: "+b+", value: "+e+")",3)},__printGetErrorItem:function(c,b){"__test_support"!==b&&a.console.log("a.storage.type."+c+".getItem: unable to find key ("+b+") in store",2)},__printSetItem:function(c,b,e){"__test_support"!==b&&a.console.log("a.storage.type."+c+".setItem: add element (key: "+b+", value: "+e+")",3)},__printRemoveItem:function(c,b){"__test_support"!==b&&a.console.log("a.storage.type."+
c+".removeItem: remove element (key: "+b+")",3)},type:{}};
a.storage.type.cookie=function(){var c=!1,b={support:!1,engine:"cookie",setItem:function(b,c,g){var h="";a.storage.__printSetItem("cookie",b,c);g&&(h=new Date,h.setTime(h.getTime()+864E5*g),h="; expires="+h.toGMTString());document.cookie=b+"="+escape(a.parser.json.stringify(c))+h+"; path=/"},getItem:function(b){if(0<document.cookie.length){var c=document.cookie.indexOf(b+"=");if(-1!=c){var c=c+b.length+1,g=document.cookie.indexOf(";",c);-1==g&&(g=document.cookie.length);c=a.parser.json.parse(unescape(document.cookie.substring(c,
g)));a.storage.__printGetItem("cookie",b,c);return c}}a.storage.__printGetErrorItem("cookie",b);return null},removeItem:function(b){a.storage.__printRemoveItem("cookie",b);this.setItem(b,"",-1);c&&a.message.dispatch("a.storage.remove",{key:b})}};b.setItem("__test_support","ok");"ok"===b.getItem("__test_support")&&(b.removeItem("__test_support"),b.support=!0);c=!0;return b}();a.storage.cookie=a.storage.type.cookie;
a.storage.type.localStorage=function(){var c=!1;"localStorage"in window&&null!==window.localStorage&&(window.localStorage.setItem("__test_support","o"),"o"===window.localStorage.getItem("__test_support")&&(window.localStorage.removeItem("__test_support"),c=!0));return{support:c,engine:"localStorage",getItem:function(b){if(c){var e=window.localStorage.getItem(b);if(a.isNull(e))return a.storage.__printGetErrorItem("localStorage",b),null;e=a.parser.json.parse(e);a.storage.__printGetItem("localStorage",
b,e);return e}return null},setItem:function(b,e){c&&(a.storage.__printSetItem("localStorage",b,e),window.localStorage.setItem(b,a.parser.json.stringify(e)),a.message.dispatch("a.storage.add",{key:b,value:e}))},removeItem:function(b){c&&(a.storage.__printRemoveItem("localStorage",b),window.localStorage.removeItem(b),a.message.dispatch("a.storage.remove",{key:b}))}}}();
a.storage.type.globalStorage=function(){var c=!1,b=window.location.hostname;a.isNull(window.globalStorage)||(window.globalStorage[b].setItem("__test_support","ok"),"ok"==window.globalStorage[b].getItem("__test_support")&&(window.globalStorage[b].removeItem("__test_support"),c=!0));return{support:c,engine:"globalStorage",getItem:function(e){if(c){var f=window.globalStorage[b].getItem(e);if(a.isObject(f)&&!a.isNull(f.value))return f=a.parser.json.parse(f.value),a.storage.__printGetItem("globalStorage",
e,f),f;if(a.isNull(f))a.storage.__printGetErrorItem("globalStorage",e);else return f=a.parser.json.parse(f),a.storage.__printGetItem("globalStorage",e,f),f}return null},setItem:function(e,f){c&&(a.storage.__printSetItem("globalStorage",e,f),window.globalStorage[b].setItem(e,a.parser.json.stringify(f)),a.message.dispatch("a.storage.add",{key:e,value:f}))},removeItem:function(e){c&&(a.storage.__printRemoveItem("globalStorage",e),window.globalStorage[b].removeItem(e),a.message.dispatch("a.storage.remove",
{key:e}))}}}();
a.storage.type.memory=function(){var c={};return{support:!0,engine:"memory",getItem:function(b){var e=c[b];if(!a.isNull(e))return a.storage.__printGetItem("memory",b,e),a.console.log("a.storage.memory.getItem: found item (key: "+b+", value: "+e+")",3),e;a.storage.__printGetErrorItem("memory",b);return null},setItem:function(b,e){c[b]=e;a.storage.__printSetItem("memory",b,e);a.message.dispatch("a.storage.add",{key:b,value:e})},removeItem:function(b){a.storage.__printRemoveItem("memory",b);a.isNull(c[b])||
(delete c[b],a.message.dispatch("a.storage.remove",{key:b}))}}}();a.storage.memory=a.storage.type.memory;
a.storage.type.sessionStorage=function(){var c=!1;"sessionStorage"in window&&!a.isNull(window.sessionStorage)&&(window.sessionStorage.setItem("__test_support","o"),"o"===window.sessionStorage.getItem("__test_support")&&(window.sessionStorage.removeItem("__test_support"),c=!0));return{support:c,engine:"sessionStorage",getItem:function(b){if(c){var e=window.sessionStorage.getItem(b);if(a.isNull(e))return a.storage.__printGetErrorItem("sessionStorage",b),null;e=a.parser.json.parse(e);a.storage.__printGetItem("sessionStorage",
b,e);return e}return null},setItem:function(b,e){c&&(a.storage.__printSetItem("sessionStorage",b,e),window.sessionStorage.setItem(b,a.parser.json.stringify(e)),a.message.dispatch("a.storage.add",{key:b,value:e}))},removeItem:function(b){c&&(a.storage.__printRemoveItem("sessionStorage",b),window.sessionStorage.removeItem(b),a.message.dispatch("a.storage.remove",{key:b}))}}}();
a.storage.type.userData=function(){var c=!1;if(document.all)try{document.write('<input type="hidden" id="a_storage" style="display:none;behavior:url(\'#default#userData\')" />');var b=document.getElementById("a_storage");b.load("aUserDataStorage");b.setAttribute("__test_support","ok");b.save("aUserDataStorage");"ok"===b.getAttribute("__test_support")&&(b.removeAttribute("__test_support"),b.save("aUserDataStorage"),c=!0)}catch(e){c=!1}return{support:c,engine:"userData",getItem:function(e){if(c){var g=
a.parser.json.parse(b.getAttribute(e));if(a.isNull(g))return a.storage.__printGetErrorItem("userData",e),null;a.storage.__printGetItem("userData",e,g);return g}return null},setItem:function(e,g){c&&(a.storage.__printSetItem("userData",e,g),b.setAttribute(e,a.parser.json.stringify(g)),b.save("aUserDataStorage"),a.message.dispatch("a.storage.add",{key:e,value:g}))},removeItem:function(e){c&&(a.storage.__printRemoveItem("userData",e),b.removeAttribute(e),b.save("aUserDataStorage"),a.message.dispatch("a.storage.remove",
{key:e}))}}}();
a.storage.type.flash=function(){function c(c){if(!1===b&&!1===e){var h=document.createElement("div");h.id="flashstoragecontent";document.body.appendChild(h);var n={id:f,rootId:h.id,flashvars:{},params:{wmode:"transparent",menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always"}};a.loader.flash(a.url+"vendor/storage/flash/localStorage.swf",function(f){e=!0;f=document.getElementById(n.id);!0===f.testData()&&(b=!0,f.setDatabase("a_flashStorage"));!0===b&&a.isFunction(c)&&c(b)},
n)}else!0===b&&a.isFunction(c)&&c(b)}var b=!1,e=!1,f="flashstorage";return{support:function(){return b},ready:function(){return e},engine:"flash",start:function(b){c(b)},getItem:function(c){this.start();if(!0===b){var e=document.getElementById(f).getData(c);if(a.isNull(e))return a.storage.__printGetErrorItem("flash",c),null;a.storage.__printGetItem("flash",c,e);return e}return null},setItem:function(c,e){this.start();!0===b&&(a.storage.__printSetItem("flash",c,e),document.getElementById(f).setData(c,
e))},removeItem:function(c){this.start();if(!0===b)return a.storage.__printRemoveItem("flash",c),document.getElementById(f).removeData(c)}}}();
a.storage.type.silverlight=function(){function c(c){if(!1===b&&!1===e){var h=document.createElement("div");h.id="__silverlightstorage";document.body.appendChild(h);var n={id:f,rootId:h.id,params:[{name:"minRuntimeVersion",value:"2.0.31005.0"},{name:"autoUpgrade",value:"true"}]};a.loader.silverlight(a.url+"vendor/storage/silverlight/silverlightStorage.xap",function(f){e=!0;!0===document.getElementById(n.id).Content.store.testData()&&(b=!0);!0===b&&a.isFunction(c)&&c(b)},n)}else!0===b&&a.isFunction(c)&&
c(b)}var b=!1,e=!1,f="silverlightstorage";return{support:function(){return b},ready:function(){return e},engine:"silverlight",start:function(b){c(b)},getItem:function(c){this.start();if(!0===b){var e=document.getElementById(f).Content.store.loadData(c);if(a.isNull(e)||"false"===e)return a.storage.__printGetErrorItem("silverlight",c),null;e=a.parser.json.parse(e);a.storage.__printGetItem("silverlight",c,e);return e}return null},setItem:function(c,e){this.start();!0===b&&(a.storage.__printSetItem("silverlight",
c,e),document.getElementById(f).Content.store.saveData(c,a.parser.json.stringify(e)))},removeItem:function(c){this.start();!0===b&&(a.storage.__printRemoveItem("silverlight",c),document.getElementById(f).Content.store.removeData(c))}}}();
a.storage.type.javafx=function(){function c(c){!1===b&&!1===e?a.loader.javafx(a.url+"vendor/storage/javafx/JavaFXStorage.jar",function(){e=!0;!0===document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.testData()&&(b=!0,el.setDatabase("a_javafxStorage"));!0===b&&a.isFunction(c)&&c(b)},{code:"javafxstorage.Main",id:"javafxstorage"}):!0===b&&a.isFunction(c)&&c(b)}var b=!1,e=!1;return{support:function(){return b},ready:function(){return e},engine:"javafx",start:function(b){c(b)},
getItem:function(c){this.start();if(!0===b){var e=document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.loadData(c);if(a.isNull(e)||"false"===e)return a.storage.__printGetErrorItem("javafx",c),null;e=a.parser.json.parse(e);a.storage.__printGetItem("javafx",c,e);return e}return null},setItem:function(c,e){this.start();!0===b&&(a.storage.__printSetItem("javafx",c,e),document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.saveData(c,a.parser.json.stringify(e)))},
removeItem:function(c){this.start();!0===b&&(a.storage.__printRemoveItem("javafx",c),document.getElementById("javafxstorage").Packages.javafxstorage.localStorage.removeData(c))}}}();a.storage.temporary=function(){for(var c=["sessionStorage","cookie","memory"],b=0,e=c.length;b<e;++b){var f=c[b];if(a.storage.type[f].support)return a.console.log("a.storage.temporary: choosing storage "+a.storage.type[f].engine,3),a.message.dispatch("a.storage.temporary.change",{engine:f}),a.storage.type[f]}return null}();
a.storage.external=function(){function c(b,c){a.storage.external.ready=b.ready;a.storage.external.support=b.support;a.storage.external.engine=b.engine;a.storage.external.getItem=b.getItem;a.storage.external.setItem=b.setItem;a.storage.external.removeItem=b.removeItem;a.isFunction(c)&&c()}return{start:function(b){var e=a.storage.type.silverlight,f=a.storage.type.flash,g=a.storage.type.javafx;e.start(function(h){h?(a.console.log("a.storage.external: choosing storage silverlight",3),c(e,b)):f.start(function(e){e?
(a.console.log("a.storage.external: choosing storage flash",3),c(f,b)):g.start(function(e){e?(a.console.log("a.storage.external: choosing storage javafx",3),c(g,b)):a.console.warn("a.storage.external: choosing storage NONE AVAILABLE",3)})})})}}}();
a.storage.persistent=function(){for(var c=["localStorage","globalStorage","userData","cookie"],b=0,e=c.length;b<e;++b){var f=c[b];if(a.storage.type[f].support)return a.console.log("a.storage.persistent: choosing storage "+a.storage.type[f].engine,3),a.message.dispatch("a.storage.persistent.change",{engine:f}),a.storage.type[f]}return null}();
null==a.storage.persistent&&(a.storage.persistent={},a.storage.persistent.support=!1,a.storage.persistent.engine=function(){return"none"},a.storage.persistent.getItem=function(){return null},a.storage.persistent.setItem=function(){},a.storage.persistent.removeItem=function(){});a.storage.support=a.storage.persistent.support;a.storage.engine=a.storage.persistent.engine;a.storage.getItem=a.storage.persistent.getItem;a.storage.setItem=a.storage.persistent.setItem;a.storage.removeItem=a.storage.persistent.removeItem;
